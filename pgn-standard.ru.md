# Стандарт: Спецификация и руководство по реализации переносимой нотации игры (Portable Game Notation)

- __Ревизия:__ 1994.03.12
- __Авторы:__ Участники интернет-группы `rec.games.chess`
- __Координатор:__ Стивен Дж. Эдвардс (отправляйте комментарии на sje@world.std.com)

## 0: Предисловие

Из истории башни Вавилонской:

> "Вот, один народ, и один язык у всех, и сие начали они делать; и ныне ничего не удержит их от того, что они задумают сделать."

_Бытие XI, 6, _Новый американский библейский перевод_

## 1: Введение

PGN - это "Portable Game Notation" (пер. _Переносимая Нотация Игры_), стандарт, разработанный для представления данных шахматной игры с использованием текстовых файлов ASCII. PGN структурирован для легкого чтения и записи человеком и для легкого разбора и генерации компьютерными программами. Цель определения и распространения PGN - облегчить обмен общедоступными данными шахматной игры среди шахматистов (органических и не только), издателей и исследователей компьютерных шахмат по всему миру.

PGN не предназначен для использования в качестве универсального стандарта, который подходит для всех возможных случаев; ни один такой стандарт не мог бы удовлетворить все мыслимые требования. Вместо этого PGN предлагается в качестве универсального портативного представления для обмена данными. Идея заключается в том, чтобы позволить создание семейства шахматных приложений, которые могут быстро и легко обрабатывать данные шахматной игры, используя PGN для импорта и экспорта между собой.

## 2: Представление данных шахматной игры

Использование компьютеров среди шахматистов стало довольно обычным в последние годы, и различные программы, как коммерческие, так и общедоступные, используются для генерации, доступа и распространения данных шахматной игры. Некоторые из этих программ довольно впечатляющи; большинство из них теперь хорошо себя ведут в том смысле, что они правильно следуют Законам Шахмат и обращаются с данными пользователей с разумной осторожностью. К сожалению, у многих программ были серьезные проблемы с несколькими аспектами внешнего представления данных шахматной игры. Иногда эти проблемы становятся более заметными, когда пользователь пытается переместить значительные объемы данных из одной программы в другую; если не было реальных усилий по обеспечению переносимости данных, то шансы на успешную передачу малы, как минимум.

### 2.1: Несовместимость обмена данных

Причины несовместимости форматов легко понять. Фактически, большинство из них связаны с теми же проблемами, которые уже были замечены в коммерческих программных продуктах для других областей, таких как обработка текста, таблицы, шрифты и графика. Иногда производитель намеренно разрабатывает формат данных с использованием шифрования или другой секретной, собственной техники для "закрепления" клиента. Иногда дизайнер может создать формат, который можно расшифровать без слишком больших трудностей, но в то же время публично отговаривать сторонние программы, утверждая защиту коммерческой тайны. Другой производитель программного обеспечения может разработать не собственную систему, но она может хорошо работать только в рамках одной программы или приложения, потому что она не может быть легко расширена. Наконец, другое программное обеспечение может работать очень хорошо для многих целей, но оно использует символы и язык, не очень понятные для людей или компьютеров, доступных тем, кто находится за пределами страны его разработки.

### 2.2: Цели спецификации

Спецификация для переносимой нотации игры должна учитывать уроки истории и быть способной обрабатывать вероятные потребности будущего. Критерии проектирования для PGN были выбраны для удовлетворения этих потребностей. Эти критерии включают:

1) Детали системы должны быть общедоступными и не содержать избыточной сложности. Идеально, если документация по какой-то причине недоступна, типичные разработчики шахматного программного обеспечения и пользователи должны понимать большую часть данных без необходимости помощи третьих лиц.
2) Детали системы должны быть не-проприетарными, чтобы пользователи и разработчики программного обеспечения не ограничивались опасениями нарушения интеллектуальных прав. Идея заключается в том, чтобы позволить программистам шахматного программного обеспечения конкурировать на свободном рынке, где клиенты могут выбирать программное обеспечение на основе своих реальных потребностей, а не на основе искусственных требований, созданных секретным форматом данных.
3) Система должна работать для различных программ. Формат должен быть таким, чтобы его можно было использовать программами шахматных баз данных, программами публикации шахмат, программами серверов шахмат и программами для игры в шахматы, не будучи излишне специфичным для какого-либо конкретного класса приложений.
4) Система должна быть легко расширяемой и масштабируемой. Возможность расширения должна включать обработку данных, которые в настоящее время не существуют, но могут ожидаться в будущем. (Примеры: новые классификации открытий и новые названия стран.) Система должна быть масштабируемой в том смысле, что она не должна иметь никаких произвольных ограничений по количеству хранимых данных. Кроме того, запланированные способы расширения должны либо сохранять ранее созданные базы данных, либо по крайней мере позволять их автоматическое преобразование.
5) Система должна быть международной. Пользователи шахматного программного обеспечения находятся во многих странах, и система не должна иметь трудностей, вызванных конвенциями, характерными для определенного региона.
6) Наконец, система должна обрабатывать те же типы и объемы данных, которые уже обрабатываются существующими шахматными программами и печатными СМИ.

### 2.3: Пример игры в PGN

Хотя его описание может показаться довольно длинным, PGN на самом деле довольно прост. Приведем пример игры в PGN; в ней содержатся большинство важных особенностей, описанных в последующих разделах этого документа.

```pgn
[Event "F/S Return Match"]
[Site "Belgrade, Serbia JUG"]
[Date "1992.11.04"]
[Round "29"]
[White "Fischer, Robert J."]
[Black "Spassky, Boris V."]
[Result "1/2-1/2"]

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3
O-O 9. h3 Nb8 10. d4 Nbd7 11. c4 c6 12. cxb5 axb5 13. Nc3 Bb7 14. Bg5 b4 15.
Nb1 h6 16. Bh4 c5 17. dxe5 Nxe4 18. Bxe7 Qxe7 19. exd6 Qf6 20. Nbd2 Nxd6 21.
Nc4 Nxc4 22. Bxc4 Nb6 23. Ne5 Rae8 24. Bxf7+ Rxf7 25. Nxf7 Rxe1+ 26. Qxe1 Kxf7
1.  Qe3 Qg5 28. Qxg5 hxg5 29. b3 Ke6 30. a3 Kd6 31. axb4 cxb4 32. Ra5 Nd5 33.
f3 Bc8 34. Kf2 Bf5 35. Ra7 g6 36. Ra6+ Kc5 37. Ke1 Nf4 38. g3 Nxh3 39. Kd2 Kb5
1.  Rd6 Kc5 41. Ra6 Nf2 42. g4 Bd3 43. Re6 1/2-1/2
```

## 3: Форматы: импорт и экспорт

В спецификации PGN существуют два формата. Это "формат для импорта" и "формат для экспорта". Это два различных способа форматирования одних и тех же данных PGN в зависимости от их источника. Подробности двух форматов описаны в следующих разделах этого документа.

Кроме форматов, есть дополнительная тема представления PGN. Хотя форматы импорта и экспорта PGN разработаны так, чтобы их могли читать люди, нет рекомендации, чтобы один из них был конечным способом представления данных шахмат в программе. Вместо этого разработчикам программного обеспечения рекомендуется рассмотреть все различные техники, которые у них есть в распоряжении, чтобы улучшить отображение шахматных данных на самом высоком уровне своих программ. Это означает, что использование различных шрифтов, размеров символов, цвета и других инструментов компьютерной поддержки взаимодействия и публикации должно быть исследовано для обеспечения высококачественного отображения, соответствующего функции конкретной программы.

### 3.1: Формат для импорта позволяет использовать данные, подготовленные вручную

Формат для импорта довольно гибок и используется для описания данных, которые могли быть подготовлены вручную, похоже на исходный файл для языка программирования высокого уровня. Программа, которая может читать данные PGN, должна быть способна обрабатывать довольно свободный формат для импорта.

### 3.2: Формат для экспорта используется для вывода, сгенерированного программой

Формат для экспорта довольно строг и используется для описания данных, которые обычно подготавливаются под контролем программы, что-то вроде красиво отформатированной исходной программы, переформатированной компилятором.

#### 3.2.1: Эквивалентность байтов

Для данного файла данных PGN представления в формате экспорта, сгенерированные различными программами PGN на той же вычислительной системе должны быть точно эквивалентными, байт за байтом.

#### 3.2.2: Архивное хранение и символ новой строки

Формат для экспорта также должен использоваться для архивного хранения. Здесь "архивное" хранение определяется как хранение, к которому можно обратиться с помощью различных вычислительных систем. Единственное дополнительное требование для архивного хранения - это то, что символ новой строки должен иметь специфическое представление, независимое от его значения для конкретной системы вычислений. Архивное представление символа новой строки - это управляющий символ ASCII `LF` (перевод строки, десятичное значение `10`, шестнадцатеричное значение `0x0a`).

К сожалению, существуют некоторые случайные обстоятельства, которые до сих пор выживают и имеют барочные представления для символа новой строки: многозначные последовательности символов, маркеры конца строки записи, байтовые счетчики начала строки, записи фиксированной длины и так далее. Это далеко за пределами проекта PGN согласовать все это с единой вселенной ANSI C и тех, кто наслаждается блаженством единственного соглашения `\n`. Некоторые системы могут просто не справиться с архивным текстовым файлом PGN с использованием местного соглашения о новой строке для текстовых редакторов. В этих случаях предоставляется определенное удовольствие использовать местное соглашение о новой строке в неархивных файлах PGN для этих текстовых редакторов.

#### 3.2.3: Скорость обработки

Несколько частей формата экспорта занимаются точными описаниями выравнивания строк и полей, которые отсутствуют в деталях формата импорта. Основная причина ограничений формата экспорта заключается в том, чтобы позволить создание простых программ перевода данных, которые могут легко сканировать данные PGN без необходимости иметь полный движок шахмат или другие сложные процедуры разбора. Идея заключается в том, чтобы поощрить авторов шахматного программного обеспечения всегда предоставлять хотя бы ограниченную возможность чтения PGN. Даже если полная возможность разбора шахматного движка доступна, скорее всего, она будет как минимум на два порядка медленнее, чем простой текстовый сканер.

#### 3.2.4: Упрощенный формат для экспорта

PGN-игра, представленная в формате экспорта, называется "упрощенным форматом экспорта", если выполняются все следующие условия:

1) в ней нет комментариев,
2) в ней есть только стандартные семь тегов идентификации ростера ("STR", см. [ниже](#811-список-семи-тегов)),
3) в ней нет вариаций рекурсивной аннотации ("RAV", см. [ниже](#825-запись-ходов-rav-recursive-annotation-variation)),
4) в ней нет числовых аннотационных глифов ("NAG", см. [ниже](#10-глифы-числовой-аннотации)).

Упрощенный формат для экспорта используется для массового хранения неаннотированных игр. Он представляет минимальный уровень стандартного соответствия для приложения экспорта PGN.

## 4: Лексикографические вопросы

Данные PGN состоят из символов; неперекрывающиеся последовательности символов образуют лексические токены.

### 4.1: Коды символов

Данные PGN представлены с использованием подмножества восьмибитного набора символов ISO 8859/1 (Latin 1). ("ISO" - это аббревиатура от International Standards Organization.) Этот набор также известен как ECMA-94 и аналогичен другим наборам символов ISO Latin. ISO 8859/1 включает стандартный семибитный набор символов ASCII для 32 управляющих символов с кодами от нуля до 31. 95 печатных символов с кодами от 32 до 126 также эквивалентны использованию семибитного ASCII. (Код символа 127, управляющий символ ASCII DEL, является графическим символом в ISO 8859/1; он не используется для представления данных PGN.)

32 кодов ISO 8859/1 от 128 до 159 - это непечатные управляющие символы. Они не используются для представления данных PGN. 32 кода от 160 до 191 - это в основном непечатные символы и их использование для представления данных PGN не рекомендуется, поскольку их графическое представление существенно различается среди других наборов символов ISO Latin. Наконец, 64 кода от 192 до 255 - это в основном печатные символы с различными диакритическими знаками; их использование рекомендуется для тех языков, которые требуют такие символы. Графическое представление этого последнего набора из 64 символов довольно постоянно для семейства ISO Latin.

Печать символов за пределами семибитного набора ASCII может появляться только в строковых данных и в комментариях. Их использование в конструкции символов не допускается.

В связи с тем что у некоторых пользователей PGN среда может не поддерживать отображение не-ASCII символов, авторы PGN-игр должны воздерживаться от использования таких символов в критических комментариях или строковых значениях в данных игры, на которые могут ссылаться такие среды. Авторы программного обеспечения PGN должны обеспечить обработку таких сред, отображая вопросительный знак ("?") для кодов символов, не являющихся ASCII. Это важный момент, поскольку существует много вычислительных систем, которые могут отображать восьмибитные символьные данные, но графика отображения может отличаться среди машин и операционных систем различных производителей.

Только четыре управляющих символа ASCII допускаются в формате импорта PGN; это горизонтальная и вертикальная табуляция, а также символы перевода строки и возврата каретки.

Внешнее представление символа новой строки может отличаться среди платформ; это допустимое изменение, пока детали реализации скрыты от разработчиков программного обеспечения и пользователей. Когда выбор возможен, предпочтительна конвенция Unix "новая строка - это перевод строки".

### 4.2: Символы табуляции

Символы табуляции, как горизонтальные, так и вертикальные, не допускаются в формате экспорта PGN. Это связано с тем, что обработка символов табуляции сильно зависит от конкретного программного обеспечения, используемого на хост-компьютере. Также символы табуляции могут не появляться в строковых данных.

### 4.3: Длины строк

Данные PGN организованы как простые текстовые строки без каких-либо специальных байтов или маркеров для вторичной структуры записи, наложенных конкретными операционными системами. В формате импорта PGN текстовые строки ограничены максимум 255 символами на строку, включая символ новой строки. Строки с 80 или более печатными символами крайне не рекомендуются из-за трудностей, с которыми сталкиваются обычные текстовые редакторы с длинными строками.

В некоторых случаях очень длинные значения тегов потребуют 80 или более столбцов, но они относительно редки. Примером такого значения тега является пара тегов "FEN"; оно может иметь длинное значение тега, но эта конкретная пара тегов используется только для представления игры, которая не начинается с обычной начальной позиции.

## 5: Комментарии

Текст комментария может появляться в данных PGN. Существует два вида комментариев. Первый вид - это комментарий "остатка строки"; этот тип комментария начинается с символа точка с запятой и продолжается до конца строки. Второй вид начинается с символа левой фигурной скобки и продолжается до следующего символа правой фигурной скобки. Комментарии не могут появляться внутри любого токена.

Скобочные комментарии не вложены; символ левой фигурной скобки, появляющийся в комментарии скобок, теряет свое специальное значение и игнорируется. Точка с запятой, появляющаяся внутри комментария скобок, теряет свое специальное значение и игнорируется. Фигурные скобки, появляющиеся внутри комментария точки с запятой, теряют свое специальное значение и игнорируются.

> __Замечание__ Представление комментариев в формате экспорта требует дополнительного уточнения.

## 6: Механизм экранирования

Существует специальный механизм экранирования для данных PGN. Этот механизм запускается символом процента (`%`), появляющимся в первом столбце строки; данные на остальной части строки игнорируются общедоступным программным обеспечением сканирования PGN. Этот механизм экранирования предназначен для частного использования разработчиками программного обеспечения и исследователями для встраивания не-PGN команд и данных в потоки PGN.

Знак процента, появляющийся в любом другом месте строки, не запускает механизм экранирования.

## 7: Токены

Данные символов PGN организованы как токены. Токен - это непрерывная последовательность символов, представляющая базовую семантическую единицу. Токены могут быть разделены от смежных токенов символами пробела. (Символы пробела включают пробел, символ новой строки и символ табуляции.) Некоторые токены самодостаточны и не требуют символов пробела.

Строковый токен - это последовательность нуля или более печатных символов, ограниченных парой кавычек (ASCII десятичное значение `34`, шестнадцатеричное значение `0x22`). Пустая строка представляется двумя смежными кавычками. (Примечание: апостроф не является кавычкой.) Кавычка внутри строки представляется обратной кавычкой, непосредственно за которой следует кавычка. Обратная кавычка внутри строки представляется двумя смежными обратными кавычками. Строки обычно используются в качестве значений пар тегов (см. ниже). Непечатные символы, такие как новая строка и табуляция, не допускаются внутри строк. Строковой токен завершается закрывающей кавычкой. В настоящее время строка ограничена максимум 255 символами данных.

Целочисленный токен - это последовательность одного или более десятичных цифровых символов. Это особый случай более общего класса токенов "символов", описанного ниже. Целочисленные токены используются для представления индикаций номера хода (см. ниже). Целочисленный токен завершается непосредственно перед первым символом, не являющимся символом токена.

Символ точки (`.`) - это токен сам по себе. Он используется для индикации номера хода (см. ниже). Он завершается сам по себе.

Символ звездочки (`*`) - это токен сам по себе. Он используется как один из возможных маркеров завершения игры (см. ниже); он указывает на незавершенную игру или игру с неизвестным или иным недоступным результатом. Он завершается сам по себе.

Левая и правая квадратные скобки (`[` и `]`) - это токены. Они используются для ограничения пар тегов (см. ниже). Обе они завершаются самостоятельно.

Левая и правая круглые скобки (`(` и `)`) - это токены. Они используются для ограничения рекурсивных аннотационных вариаций (см. ниже). Обе они завершаются самостоятельно.

Левая и правая угловые скобки (`<` и `>`) - это токены. Они зарезервированы для будущего расширения. Оба они завершаются самостоятельно.

Глиф числовой аннотации (Numeric Annotation Glyph, "NAG", см. [ниже](#10-numeric-annotation-glyphs)) - это токен. Он начинается символом доллара (`$`), за которым следует один или более цифровых символов. Он завершается непосредственно перед первым символом, не являющимся цифровым символом.

Символьный токен начинается символом буквы или цифры и немедленно за ним следует последовательность нуля или более символов продолжения символа. Эти символы продолжения - это буквенные символы (`A-Za-z`), цифровые символы (`0-9`), символ подчеркивания (`_`), символ плюса (`+`), символ октоторпа (`#`), символ равно (`=`), символ двоеточия (`:`) и символ дефиса (`-`). Символы используются для различных целей. Все символы в символе значимы. Символьный токен завершается непосредственно перед первым символом, не являющимся символом символа, следующим за последовательностью символов символа. В настоящее время символ ограничен максимум 255 символами длины.

## 8: Разбор игр

PGN-файл базы данных - это последовательное собрание нуля или более PGN-игр. Пустой файл - это допустимый, хотя и не информативный, PGN-файл базы данных.

Запись PGN-игры состоит из двух частей. Первая - это секция пар тегов, а вторая - это секция ходов. Секция пар тегов предоставляет информацию, которая идентифицирует игру, определяя значения, связанные с набором стандартных параметров. Секция ходов предоставляет обычно перечисленные и, возможно, аннотированные ходы игры вместе с завершающим маркером завершения игры. Сами ходы шахмат представлены с использованием SAN (Standard Algebraic Notation - стандартной алгебраической нотации), также описанной позже в этом документе.

### 8.1: Секция пар тегов

Секция пар тегов состоит из серии нуля или более пар тегов.

Пара тегов состоит из четырех последовательных токенов: токена левой квадратной скобки, токена символа, токена строки и токена правой квадратной скобки. Токен символа - это имя тега, а токен строки - это значение тега, связанное с именем тега. (Существует стандартный набор имен тегов и семантики, описанных ниже.) Одно и то же имя тега не должно появляться более одного раза в секции пар тегов.

Дополнительное ограничение на имена тегов заключается в том, что они состоят исключительно из букв, цифр и символа подчеркивания. Это сделано для облегчения сопоставления имен тегов с именами ключей и атрибутов для использования с общими программами баз данных.

Для формата импорта PGN между любыми смежными парами токенов в паре тегов могут быть ноль или более символов пробела.

Для формата экспорта PGN нет пробелов между левой квадратной скобкой и именем тега, нет пробелов между именем тега и значением тега, и есть один символ пробела между именем тега и значением тега.

Имена тегов, как и все символы, регистрозависимы. Все имена тегов, используемые для архивного хранения, начинаются с заглавной буквы.

Формат для импорта PGN может иметь несколько пар тегов на одной строке и даже пару тегов, охватывающую более одной строки. Формат для экспорта PGN требует, чтобы каждая пара тегов появлялась слева по тексту на своей собственной строке; за последней парой тегов следует одна пустая строка.

Некоторые значения тегов могут состоять из последовательности элементов. Например, в игре консультации может быть несколько игроков для данной стороны. Когда это происходит, между смежными элементами появляется один символ `:` (двоеточие). Поскольку этот символ используется в качестве внутреннего разделителя в строках, двоеточие не должно появляться в другом месте строки.

Формат пары тегов спроектирован для расширения; изначально в качестве значений пар тегов допускаются только строки. Форматы значений тегов, связанные с STR ([Seven Tag Roster](#811-список-семи-тегов)), не изменятся; они всегда будут строковыми значениями. Однако долгосрочные планы предусматривают возможность использования общих структур списков в качестве значений тегов для тегов, не относящихся к STR. Использование этих расширенных значений тегов, вероятно, будет ограничено специальными исследовательскими программами. В любом случае верхний уровень структуры пары тегов остается неизменным: левая квадратная скобка, имя тега, значение тега и правая квадратная скобка.

#### 8.1.1: Список семи тегов

Существует набор тегов, определенный для обязательного использования для архивного хранения данных PGN. Это STR (Seven Tag Roster, Список семи тегов). Интерпретация этих тегов фиксирована, как и порядок их появления. Хотя определение и использование дополнительных имен тегов и семантики разрешено и поощряется при необходимости, STR является общим знаменателем, за которым должны следовать все программы для общественного обмена данными.

Для формата импорта порядок пар тегов не важен. Для формата экспорта пары тегов STR появляются перед любыми другими парами тегов. (Пары тегов STR также должны появляться в определенном порядке; этот порядок описан ниже.) Также для формата экспорта любые дополнительные пары тегов появляются в алфавитном порядке по имени тега.

Имена семи тегов STR (в порядке) - это:

1) __Event__ (название турнира или матча)
2) __Site__ (место проведения события)
3) __Date__ (дата начала игры)
4) __Round__ (порядковый номер раунда игры)
5) __White__ (игрок с белыми фигурами)
6) __Black__ (игрок с черными фигурами)
7) __Result__ (результат игры)

Множество дополнительных имен тегов приведено позже в этом документе.

Для формата экспорта PGN после последней пары тегов STR появляется одна пустая строка. Это помогает простым программам сканирования быстро определить конец секции пар тегов и начало секции ходов.

##### 8.1.1.1: Тег Event

Значение тега `Event` должно быть достаточно описательным. Сокращения следует избегать, за исключением случаев если это действительно необходимо. Для облегчения сканирования базы данных следует использовать последовательное именование событий. Если имя события неизвестно, в качестве значения тега должен появиться один вопросительный знак.

Примеры:

```text
[Event "FIDE World Championship"]

[Event "Moscow City Championship"]

[Event "ACM North American Computer Championship"]

[Event "Casual Game"]
```

##### 8.1.1.2: Тег Site

Значение тега `Site` должно включать названия города и региона вместе с стандартным названием страны. Для стран, где доступны трехбуквенные коды IOC (Международного олимпийского комитета), предлагается использовать их. Если место проведения события неизвестно, в качестве значения тега должен появиться один вопросительный знак. Запятая может использоваться для разделения города от региона. Запятая не нужна для разделения города или региона от кода страны. Позже в этом документе приведен список трехбуквенных кодов стран IOC, а также несколько дополнений для "мест", не включенных в IOC.

Примеры:

```text
[Site "New York City, NY USA"]

[Site "St. Petersburg RUS"]

[Site "Riga LAT"]
```

##### 8.1.1.3: Тег Date

Значение тега `Date` дает начальную дату игры. (Примечание: это не обязательно та же дата, что и начальная дата события.) Дата указана относительно местного времени места, указанного в теге `Event`. Значение тега `Date` всегда использует стандартный формат из десяти символов: `YYYY.MM.DD`. Первые четыре символа - это цифры, обозначающие год, следующий символ - точка, следующие два символа - цифры, обозначающие месяц, следующий символ - точка, и последние два символа - цифры, обозначающие день месяца. Если какое-либо из полей цифр неизвестно, вместо цифр используются вопросительные знаки.

Примеры:

```text
[Date "1992.08.31"]

[Date "1993.??.??"]

[Date "2001.01.01"]
```

##### 8.1.1.4: Тег Round

Значение тега `Round` дает порядковый номер раунда игры. В матчевых соревнованиях это значение - это номер игры, а не номер раунда. Если использование номера раунда неуместно, в качестве значения тега должен появиться один дефис. Если раунд неизвестен, в качестве значения тега должен появиться один вопросительный знак.

Некоторые организаторы используют необычные круговые обозначения и имеют многократные игровые раунды, а иногда даже условные раунды. В этих случаях многократное обозначение раунда можно сделать из последовательности целых чисел раунда, разделенных точками. Самое левое целое число представляет наиболее значимый раунд, а последующие целые числа представляют номера раундов в порядке убывания иерархии раундов.

Примеры:

```text
[Round "1"]

[Round "3.1"]

[Round "4.1.2"]
```

##### 8.1.1.5: Тег White

Значение тега `White` - это имя игрока или игроков белыми фигурами. Имена указываются так, как они появляются в телефонном справочнике. Фамилия появляется первой. Если доступно имя или первая буква имени, оно разделяется от фамилии запятой и пробелом. Наконец, может появиться одна или несколько средних инициалов. (Где встречается запятая, следующий символ должен быть пробел. Где встречается инициал, следующий символ должен быть точка.) Если имя неизвестно, в качестве значения тега должен появиться один вопросительный знак.

Есть намерение позволить смысловую сортировку ASCII значения тега, которая независима от обычных обычаев формирования имен в разных странах. Если более одного человека играет белыми фигурами, имена перечисляются в алфавитном порядке и разделяются символом двоеточия между смежными записями. Игрок, который также является компьютерной программой, должен иметь соответствующую информацию о версии после имени программы.

Формат, используемый в списках рейтинга FIDE, подходит для использования для имен тегов.

Примеры:

```text
[White "Tal, Mikhail N."]

[White "van der Wiel, Johan"]

[White "Acme Pawngrabber v.3.2"]

[White "Fine, R."]
```

##### 8.1.1.6: Тег Black

Значение тега `Black` представляет собой имя игрока или игроков черными фигурами. Представленные имена должны соответствовать тем же стандартам, что и для значения тега `White`.

Примеры:

```text
[Black "Lasker, Emmanuel"]

[Black "Smyslov, Vasily V."]

[Black "Smith, John Q.:Woodpusher 2000"]

[Black "Morphy"]
```

##### 8.1.1.7: Тег Result

Значение тега `Result` - это результат игры. Он всегда совпадает с маркером завершения игры, который завершает секцию ходов. Это всегда одно из четырех возможных значений: `1-0` (победа белых), `0-1` (победа черных), `1/2-1/2` (ничья) и `*` (игра еще не завершена, игра прервана или результат иначе неизвестен). Обратите внимание, что цифра ноль используется в обоих первых двух случаях; а не буква `O`.

Все возможные примеры:

```text
[Result "0-1"]

[Result "1-0"]

[Result "1/2-1/2"]

[Result "*"]
```

### 8.2: Секция ходов

Секция ходов состоит из ходов, индикаторов номера хода, необязательных аннотаций и одного завершающего маркера завершения игры.

Так как нелегальные ходы не являются настоящими шахматными ходами, они не допускаются в тексте ходов PGN. Они могут появляться в комментариях. Надеемся, что нелегальные ходы относительно редки в играх, достойных записи.

#### 8.2.1: Выравнивание строк ходов

В формате импорта PGN токены в тексте ходов не требуют какого-либо специфического выравнивания строк.

В формате экспорта PGN токены в тексте ходов выравниваются по левому краю на последовательных строках текста, каждая из которых имеет менее 80 печатных символов. Столько токенов, сколько возможно, размещаются на одной строке, остальные появляются на последующих строках. Между любыми двумя смежными символьными токенами на одной строке в тексте ходов появляется один пробел. Как и в случае с секцией пар тегов, одна пустая строка следует за последней строкой данных, чтобы завершить секцию ходов.

Ни первый, ни последний символ на строке экспорта PGN не является пробелом. (Это может измениться в случае комментариев; этот раздел в настоящее время находится в разработке.)

#### 8.2.2: Индикации номера хода

Индикация номера хода состоит из одного или нескольких смежных цифровых символов (токен целого числа), за которыми следует ноль или более точек. Целочисленная часть индикации дает номер хода немедленно после белого хода (если присутствует) и также немедленно после черного хода (если присутствует).

##### 8.2.2.1: Индикация номера хода в формате импорта

Формат для импорта PGN не требует индикаций номера хода. Он не запрещает излишние индикации номера хода в любом месте текста хода до тех пор пока номера хода правильные.

Индикация номера хода в формате импорта PGN может иметь ноль или более точек, следующих за последовательностью цифровых символов, которая дает номер хода; один или более пробелов могут появляться между последовательностью цифровых символов и точками.

##### 8.2.2.2: Индикация номера хода в формате экспорта

Существует два способа индикации хода в формате экспорта, один для использования перед белым ходом и один для использования перед черным ходом. Индикация номера хода перед белым ходом состоит из целого числа, представляющего номер хода, с одной точкой, добавленной в конце. Индикация номера хода перед черным ходом состоит из целого числа, представляющего номер хода, с тремя точками, добавленными в конце.

Все белые ходы имеют предшествующую индикацию номера хода. Все черные ходы имеют предшествующую индикацию номера хода, за исключением двух случаев: первый, если между черным ходом и предыдущим белым ходом есть вмешательство аннотации или комментария; и второй, если нет предыдущего белого хода в специальном случае, когда игра начинается с позиции в которой черные начинают первыми.

Других случаев использования индикации номера хода в формате экспорта PGN не существует.

#### 8.2.3: Запись ходов в формате SAN (Standard Algebraic Notation)

SAN (Standard Algebraic Notation, Стандартная Алгебраическая Нотация) - это стандарт представления шахматных ходов с использованием кодов ASCII латинского алфавита.

Примеры записанных игр в формате SAN можно найти в большинстве современных шахматных публикаций. SAN, представленный в этом документе, использует однобуквенные английские сокращения для шахматных фигур, хотя это легко изменить в исходном коде. Английский выбран вместо других языков, потому что он, по-видимому, наиболее широко распространен.

Альтернативой SAN является FAN (Figurine Algebraic Notation, Фигурная Алгебраическая Нотация). FAN использует миниатюрные иконки фигур вместо однобуквенных сокращений фигур. В остальном две нотации идентичны.

##### 8.2.3.1: Идентификация поля

SAN идентифицирует каждое из шестидесяти четырех полей шахматной доски уникальным двухсимвольным именем. Первый символ идентификатора поля - это вертикаль поля; это столбец из восьми полей, обозначенный одной строчной буквой от `a` (крайний слева или ферзевый) до и включая `h` (крайний справа или королевский). Второй символ идентификатора поля - это горизонталь поля; это строка из восьми полей, обозначенная одной цифрой от `1` (нижняя сторона [первый ряд белых]) до и включая `8` (верхняя сторона [первый ряд черных]). Начальные поля некоторых фигур: белая ладья ферзевого ряда на a1, белый король на e1, черная пешка ферзевого коня на b7 и черная ладья королевского ряда на h8.

##### 8.2.3.2: Идентификация фигуры

SAN определяет каждую фигуру одной заглавной буквой. Стандартные английские значения: пешка = `P`, конь = `N`, слон = `B`, ладья = `R`, ферзь = `Q` и король = `K`.

Код буквы для пешки не используется для SAN ходов в формате экспорта PGN. Однако некоторое программное обеспечение импорта PGN может позволять появление кодов пешки. Кроме того, коды пешки и других фигур необходимы для использования в некоторых парах тегов и аннотационных конструкциях.

Это действительно немного несправедливо выбирать английские буквы фигур вместо букв из других языков. Есть небольшое оправдание в том, что английский является де-факто универсальным вторым языком среди большинства шахматистов и пользователей программ. Это, вероятно, лучшее, что можно сделать на данный момент. Позже в этом документе приведены альтернативные буквы фигур, но они должны использоваться только для локального программного обеспечения и не для архивного хранения или для динамического обмена между программами.

##### 8.2.3.3: Основная конструкция хода SAN

Обычно ход SAN представляется указанием буквы перемещаемой фигуры (за исключением пешек), за которой следует идентификатор поля назначения. Ход пешки представляется указанием только идентификатора поля назначения. Ход взятия обозначается строчной буквой `x`, следующей за буквой перемещаемой фигуры, за которой следует идентификатор поля назначения; ходы взятия пешки включают букву вертикали исходного поля захватывающей пешки непосредственно перед символом `x`.

Короткая рокировка в формате SAN указывается последовательностью `O-O`; длинная рокировка указывается последовательностью `O-O-O`. Обратите внимание, что для короткой рокировки используется заглавная буква `O`, а не цифра ноль. Использование символа нуля не только несовместимо с традиционными текстовыми практиками, но также может запутать алгоритмы разбора, которые также должны понимать номера ходов и маркеры завершения игры. Кроме того, использование буквы `O` согласуется с практикой начинать все символы ходов с буквы; также оно следует соглашению, что все символы ходов, не являющиеся пешками, начинаются с заглавной буквы.

Взятие на проходе не имеет специальной нотации; оно обозначается как ход пешкой на поле взятия. Превращение пешки обозначается символом равенства `=`, за которым следует буква фигуры, в которую пешка превращается, за которой следует идентификатор поля назначения. Как и в случае с другими ходами, буква фигуры превращения пешки должна быть заглавной.

##### 8.2.3.4: Разъяснение неоднозначности

В случае неоднозначностей (несколько фигур одного типа движутся на одно поле), принимается первый соответствующий шаг из трех следующих шагов:

1) Если движущиеся фигуры могут быть отличены по исходным вертикалям, исходные вертикали вставляются непосредственно после буквы фигуры.
2) Если движущиеся фигуры могут быть отличены по исходным горизонталям, исходные горизонтали вставляются непосредственно после буквы фигуры.
3) Если ни первый, ни второй шаг не приводят к однозначному определению фигуры, двухсимвольные координаты исходного поля движущейся фигуры вставляются непосредственно после буквы фигуры.

Обратите внимание, что разъяснение неоднозначности требуется только для фигур одного и того же типа, ходящих на одно поле, но не используется для различия между нападениями фигур одного типа на одно поле. Примером этого может быть позиция с двумя белыми конями, один из которых находится на поле `c3`, а другой на поле `g1`, и свободным полем `e2` при ходе белых. Оба коня атакуют поле `e2`, и если оба могут ходить на это поле, то требуется разъяснение неоднозначности. В этом случае ходы коней будут `Nce2` и `Nge2`. Однако если белый король находится на поле `e1`, а черный слон находится на поле `b4`, а поле `d2` свободно (таким образом, белый конь на поле `c3` связан), то только один белый конь (на поле `g1`) может ходить на поле `e2`: `Ne2`.

##### 8.2.3.5: Символы индикации шаха и мата

Если ход выполняется с шахом, то к обычной SAN нотации добавляется знак плюса `+` в качестве суффикса к базовой нотации хода; если ход является матом, то вместо этого добавляется знак решетки (октоторп) `#`.

Ни наличие, ни отсутствие индикатора шаха или мата не используется для разъяснения неоднозначности. Это означает, что если две (или более) фигуры одного типа могут двигаться на одно поле, различия в статусе шаха хода не устраняют необходимость в стандартном разъяснении по горизонтали и вертикали, описанном выше. (Обратите внимание, что различие в вышеупомянутом статусе шаха может возникнуть только в случае вскрытого шаха.)

Ни индикатор шаха, ни индикатор мата не считаются аннотацией, так как они не передают субъективную информацию. Поэтому они качественно отличаются от аннотаций хода, таких как `!` и `?`. Субъективные аннотации хода обрабатываются с использованием Numeric Annotation Glyphs, описанных в следующем разделе этого документа.

Не существует специальных обозначений для двойного шаха или вскрытого шаха.

Не существует специальных символов для ничейных ходов.

##### 8.2.3.6: Длина хода SAN

Ходы SAN могут быть короткими как два символа (например, `d4`), так и длинными как семь символов (например, `Qa6xb7#`, `fxg1=Q+`). Средняя длина хода SAN, видимая в реалистичных играх, вероятно, чуть больше трех символов. Если правила SAN кажутся сложными, будьте уверены, что более ранние системы нотации LEN (Long English Notation) и EDN (English Descriptive Notation) намного сложнее, и что LAN (Long Algebraic Notation, предшественник SAN) излишне громоздок.

##### 8.2.3.7: Импорт и экспорт SAN

Формат для экспорта PGN всегда использует каноническое SAN для представления ходов в секции ходов PGN игры. Формат для импорта немного более гибок и допускает ходы, которые не соответствуют точно каноническому формату. Однако эти допущения могут различаться среди различных программ для чтения PGN. Только данные, появляющиеся в формате экспорта, во всех случаях гарантированно могут быть импортированы во все программы для чтения PGN.

Существует ряд рекомендуемых руководящих принципов для использования программного обеспечения для чтения PGN с целью разрешения нестандартного представления хода SAN. Идея заключается в том, чтобы заставить программу для чтения PGN применять различные преобразования для попытки обнаружить ход, представленный нестандартным вводом. Некоторые предложенные преобразования включают: изменение регистра букв, вставку индикатора взятия, вставку индикатора шаха и вставку индикатора мата.

##### 8.2.3.8: Суффиксные аннотации хода SAN

Формат для импорта PGN позволяет использование традиционных суффиксных аннотаций для ходов. Доступно ровно шесть таких аннотаций: `!`, `?`, `!!`, `!?`, `?!` и `??`. На каждый ход может быть не более одной такой аннотации, и если она присутствует, она всегда является последней частью символа хода.

При экспорте PGN суффиксные аннотации хода SAN заменяются соответствующими глифами Numeric Annotation Glyphs, как описано в следующем разделе этого документа. Например, если ход `Qxa8?` появляется записи ходов PGN в формате для импорта, он будет заменен двумя смежными символами `Qxa8 $2`.

#### 8.2.4: Глифы числовой аннотации хода (NAG - Numeric Annotation Glyph)

NAG (Numeric Annotation Glyph - глиф числовой аннотации) - это элемент записи хода, который используется для обозначения простой аннотации на языке, независимом от языка. NAG формируется из знака доллара `$` с неотрицательным десятичным целым суффиксом. Неотрицательное целое число должно быть от нуля до 255.

#### 8.2.5: Запись ходов RAV (Recursive Annotation Variation)

RAV (Recursive Annotation Variation - Рекурсивная Аннотация Варианта) - это последовательность ходов, содержащая один или несколько ходов, заключенных в круглые скобки. RAV используется для представления альтернативного варианта. Альтернативная последовательность ходов, представленная RAV, является той, которая может быть сыграна заключительным ходом, предшествующим RAV. Поскольку RAV является рекурсивной конструкцией, она может быть вложенной.

> __Замечание__ Спецификация представления RAV элементов для импорта/экспорта требует дальнейшего развития.

#### 8.2.6: Маркеры завершения игры

Каждая запись ходов завершается строго одним маркером завершения игры; маркер всегда появляется в конце секции ходов. Маркер завершения игры - это символ, который является одним из четырех возможных значений: `1-0` (победа белых), `0-1` (победа черных), `1/2-1/2` (ничья) и `*` (игра еще не завершена, результат неизвестен или игра прервана). Обратите внимание, что цифра ноль используется в вышеупомянутых двух случаях; а не заглавная буква `O`. Маркер завершения игры, появляющийся в секции ходов игры, должен соответствовать значению тега `Result` игры. (Хотя маркер появляется как строка в теге Result, он появляется как символ без кавычек в секции ходов.)

## 9: Дополнительные имена тегов

Следующие имена тегов и их связанные семантики рекомендуются для использования для информации, не содержащейся в Списке Семи Тегов (STR).

### 9.1: Информация, связанная с игроком

Если в поле игрока есть более одного поля в экземпляре тега игрока (White или Black), то будут соответствующие множественные поля в любых последующих тегах. Например, если тег White имеет три поля значения "Jones:Smith:Zacharias" (консультационная игра), то тег WhiteTitle может иметь значение "IM:-:GM", если Jones был международным мастером, Smith был без титула, а Zacharias был гроссмейстером.

#### 9.1.1: Теги: WhiteTitle, BlackTitle

Эти теги используют строковые значения, такие как `FM`, `IM` и `GM`; они используются только для стандартных сокращений для титулов FIDE. Значение `-` используется для игрока без титула.

#### 9.1.2: Теги: WhiteElo, BlackElo

Эти теги используют целочисленные значения; они используются для рейтингов FIDE Elo. Значение `-` используется для игрока без рейтинга.

#### 9.1.3: Теги: WhiteUSCF, BlackUSCF

Эти теги используют целочисленные значения; они используются для рейтингов USCF (United States Chess Federation). Аналогичные имена тегов могут быть сконструированы для других агентств рейтингов.

#### 9.1.4: Теги: WhiteNA, BlackNA

Эти теги используют строковые значения; это электронные адреса или сетевые адреса игроков. Значение `-` используется для игрока без электронного адреса.

#### 9.1.5: Теги: WhiteType, BlackType

Эти теги используют строковые значения; они описывают типы игроков. Значения `human` должны использоваться для человека, а значения `program` должны использоваться для алгоритмических (компьютерных) игроков.

### 9.2: Информация, связанная с событием

Следующие теги используются для предоставления дополнительной информации о событии.

#### 9.2.1: Тег: EventDate

Этот тег использует значение даты, аналогичное тегу Date, которое дает начальную дату события.

#### 9.2.2: Тег: EventSponsor

Этот тег использует строковое значение, в котором указывается имя спонсора события.

#### 9.2.3: Тег: Section

Этот тег использует строковое значение; он используется для раздела игры в турнире (например, "Open" или "Reserve").

#### 9.2.4: Тег: Stage

Этот тег использует строковое значение; он используется для этапа многоэтапного события (например, "Preliminary" или "Semifinal").

#### 9.2.5: Тег: Board

Этот тег использует целочисленное значение; он идентифицирует номер доски в командном событии и также в сеансе одновременной игры.

### 9.3: Информация о дебюте (традиционные имена)

Следующие пары тегов используются для традиционных имен дебютов. Связанные с тегами значения будут различаться в зависимости от используемого языка.

#### 9.3.1: Тег: Opening

Этот тег использует строковое значение; он используется для традиционного имени дебюта. Этот тег связан с использованием операции EPD "v0", описанной в следующем разделе этого документа.

#### 9.3.2: Тег: Variation

Этот тег использует строковое значение; он используется для дальнейшей уточнения тега Opening. Это будет различаться в зависимости от локали. Эта пара тегов связана с использованием операции EPD "v1", описанной в следующем разделе этого документа.

#### 9.3.3: Тег: SubVariation

Этот тег использует строковое значение; он используется для дальнейшей уточнения тега Variation. Это будет различаться в зависимости от локали. Эта пара тегов связана с использованием операции EPD "v2", описанной в следующем разделе этого документа.

### 9.4: Информация о дебюте (поставщики информации третьих лиц)

Следующие пары тегов используются для представления дебюта в соответствии с различными поставщиками информации третьих лиц и организациями. Ссылки на эти организации не означают никакой поддержки их или поддержки ими.

#### 9.4.1: Тег: ECO

Этот тег использует строковое значение в форме `XDD` или в форме `XDD/DD`, где `X` - это буква от `A` до `E`, а позиции `D` - это цифры; он используется для обозначения дебюта из пятитомного _Encyclopedia of Chess Openings_. Эта пара тегов связана с использованием операции EPD "eco", описанной в следующем разделе этого документа.

#### 9.4.2: Тег: NIC

Этот тег использует строковое значение; он используется для обозначения дебюта из базы данных _New in Chess_. Эта пара тегов связана с использованием операции EPD "nic", описанной в следующем разделе этого документа.

### 9.5: Информация, связанная с временем и датой

Следующие теги помогают дополнительно уточнить информацию о времени и дате, связанную с игрой.

#### 9.5.1: Тег: Time

Этот тег использует значение времени в форме "HH:MM:SS"; он аналогичен тегу Date, за исключением того, что обозначает местное время (часы, минуты и секунды) начала игры. Обратите внимание, что для разделителей полей в теге Time используются двоеточия, а не точки. Значение берется из местного времени, соответствующего месту, указанному в паре тегов Site.

#### 9.5.2: Тег: UTCTime

Этот тег аналогичен тегу Time, за исключением того, что время указано в соответствии со стандартом Universal Coordinated Time.

#### 9.5.3: Тег: UTCDate

Этот тег аналогичен тегу Date, за исключением того, что дата указана в соответствии со стандартом Universal Coordinated Time.

### 9.6: Контроль времени

Следующий тег используется для помощи в описании временного контроля, используемого в игре.

#### 9.6.1: Тег: TimeControl

Этот тег использует список из одного или нескольких полей временного контроля. Каждое поле содержит дескриптор для каждого периода временного контроля; если присутствует более одного дескриптора, то они разделяются символом двоеточия (`:`). Дескрипторы появляются в порядке, в котором они используются в игре. Последнее появление поля считается неявно повторяющимся для дальнейших периодов контроля времени по мере необходимости.

Существует шесть видов полей TimeControl.

Первый вид - это одиночный вопросительный знак (`?`), который означает, что режим контроля времени неизвестен. Когда используется, это обычно единственный дескриптор.

Второй вид - это одиночный дефис (`-`), который означает, что режим контроля времени не использовался. Когда используется, это обычно единственный дескриптор.

Третий вид поля TimeControl формируется как два положительных целых числа, разделенных символом дроби (`/`). Первое целое число - это количество ходов в периоде, а второе - количество секунд в периоде. Таким образом, период контроля времени в 40 ходов за 2 1/2 часа будет представлен как "40/9000".

Четвертый вид поля TimeControl используется для контроля времени "на всю партию". Он должен использоваться только для последнего дескриптора в значении тега TimeControl. Формат состоит из одного целого числа, которое дает количество секунд в периоде. Таким образом, партия с контролем времени "на всю партию" будет представлена значением тега TimeControl "300".

Пятый вид поля TimeControl используется для контроля времени "инкрементального" типа. Он должен использоваться только для последнего дескриптора в значении тега TimeControl. Формат состоит из двух положительных целых чисел, разделенных знаком плюса (`+`). Первое целое число дает минимальное количество секунд, выделенное на период, а второе целое число дает количество дополнительных секунд, добавляемых после каждого хода. Таким образом, инкрементальный контроль времени 90 минут плюс одна дополнительная минута на ход будет представлен значением тега TimeControl "4500+60".

Шестой вид поля TimeControl используется для контроля времени "песочных часов". Он должен использоваться только для последнего дескриптора в значении тега TimeControl. Формат состоит из символа астериска (`*`), за которым следует положительное целое число. Целое число дает общее количество секунд в периоде песочных часов. Контроль времени реализуется так, как если бы песочные часы были установлены в начале периода с равным количеством песка в каждой из двух камер, и игроки переворачивают песочные часы после каждого хода, с временным штрафом, указанным пустой верхней камерой. Электронная реализация физического песочного часов может использоваться. Пример спецификации песочных часов для обычного трехминутного песочного таймера будет иметь значение тега "*180".

Дополнительные виды полей TimeControl будут определены по мере необходимости.

### 9.7: Альтернативные начальные позиции

Существуют два тега, определенных для помощи в описании игр, которые не начинаются с обычной начальной позиции.

#### 9.7.1: Тег: SetUp

Этот тег принимает целое число, которое обозначает "установочный" статус игры. Значение "0" указывает, что игра началась со стандартной начальной позиции. Значение "1" указывает, что игра началась с установочной позиции; эта позиция указывается в паре тегов "FEN". Этот тег должен появиться для игры, начинающейся с установочной позиции. Если он появляется с тегом "1", пара тегов FEN также должна быть указана.

#### 9.7.2: Тег: FEN

Этот тег использует строку, которая дает начальную позицию, используя формат Forsyth-Edwards Notation. Если тег SetUp появляется с тегом "1", пара тегов FEN также должна быть указана.

### 9.8: Завершение игры

Существует один тег, который указывает способ завершения игры.

#### 9.8.1: Тег: Termination

Этот тег принимает строку, которая описывает причину завершения игры. В то время как тег Result дает результат игры, он не предоставляет дополнительной информации, и поэтому определен тег Termination для этой цели.

Строки, которые могут появиться в качестве значений тега Termination:

- `abandoned`: игра прервана.
- `adjudication`: результат из-за процесса административного решения.
- `death`: проигравший игрок призван к более важным делам.
- `emergency`: игра завершена из-за непредвиденных обстоятельств.
- `normal`: игра завершена обычным образом.
- `rules infraction`: административное поражение из-за нарушения проигравшим игроком либо Правил Шахмат, либо правил мероприятия.
- `time forfeit`: поражение по времени.
- `unterminated`: игра не завершена.

### 9.9: Разное

Это теги, которые могут быть кратко описаны и которые плохо подходят для других разделов.

#### 9.9.1: Тег: Annotator

Этот тег использует имя или имена в формате тегов имени игрока; это идентифицирует аннотатора или аннотаторов игры.

#### 9.9.2: Тег: Mode

Этот тег использует строку, которая дает режим игры. Примеры: "OTB" (over the board - за доской), "PM" (paper mail - почта), "EM" (electronic mail - электронная почта), "ICS" (Internet Chess Server - шахматный сервер) и "TC" (general telecommunication - телекоммуникации в общем).

#### 9.9.3: Тег: PlyCount

Этот тег принимает целое число; он используется для указания количества ходов в игре.

## 10: Глифы числовой аннотации

Глиф NAG, равный нулю, используется для нулевой аннотации; он предоставляется для удобства проектировщиков программного обеспечения в качестве заполнителя и, вероятно, не должен использоваться во внешних данных PGN.

Глифы NAG с числовыми значениями от 1 до 9 аннотируют только что сделанный ход.

Глифы NAG с числовыми значениями от 10 до 135 описывают текущую позицию.

Глифы NAG с числовыми значениями от 136 до 139 описывают давление времени.

Остальные глифы NAG с числовыми значениями от 140 до 255 зарезервированы для будущего определения.

> __Замечание:__ приведенные ниже числовые значения следует рассматривать как предварительные; они могут быть изменены в результате обратной связи рецензентов.

| NAG | Интерпретация |
| --- | -------------- |
| 0 | нулевая аннотация |
| 1 | хороший ход (традиционный знак "!") |
| 2 | плохой ход (традиционный знак "?") |
| 3 | очень хороший ход (традиционный знак "!!") |
| 4 | очень плохой ход (традиционный знак "??") |
| 5 | спекулятивный (оригинальный, неожиданный) ход (традиционный знак "!?") |
| 6 | сомнительный ход (традиционный знак "?!") |
| 7 | форсированный ход (все остальные ходы быстро проигрывают) |
| 8 | единственный ход (нет разумных альтернатив) |
| 9 | худший ход |
| 10 | равная позиция |
| 11 | равные шансы, спокойная позиция |
| 12 | равные шансы, активная позиция |
| 13 | неясная позиция |
| 14 | небольшое преимущество белых |
| 15 | небольшое преимущество черных |
| 16 | преимущество белых |
| 17 | преимущество черных |
| 18 | серьезное преимущество белых |
| 19 | серьезное преимущество черных |
| 20 | подавляющее преимущество белых (черные должны сдаться) |
| 21 | подавляющее преимущество черных (белые должны сдаться) |
| 22 | цугцванг белых |
| 23 | цугцванг черных |
| 24 | белые имеют небольшое преимущество в пространстве |
| 25 | черные имеют небольшое преимущество в пространстве |
| 26 | белые имеют умеренное преимущество в пространстве |
| 27 | черные имеют умеренное преимущество в пространстве |
| 28 | белые имеют решающее преимущество в пространстве |
| 29 | черные имеют решающее преимущество в пространстве |
| 30 | белые имеют небольшое преимущество в развитии |
| 31 | черные имеют небольшое преимущество в развитии |
| 32 | белые имеют умеренное преимущество в развитии |
| 33 | черные имеют умеренное преимущество в развитии |
| 34 | белые имеют решающее преимущество в развитии |
| 35 | черные имеют решающее преимущество в развитии |
| 36 | инициатива белых |
| 37 | инициатива черных |
| 38 | белые имеют долговременную инициативу |
| 39 | черные имеют долговременную инициативу |
| 40 | атака белых |
| 41 | атака черных |
| 42 | у белых недостаточная компенсация за материальный дефицит |
| 43 | у черных недостаточная компенсация за материальный дефицит |
| 44 | у белых достаточная компенсация за материальный дефицит |
| 45 | у черных достаточная компенсация за материальный дефицит |
| 46 | у белых более чем достаточная компенсация за материальный дефицит |
| 47 | у черных более чем достаточная компенсация за материальный дефицит |
| 48 | у белых небольшое преимущество в центре |
| 49 | у черных небольшое преимущество в центре |
| 50 | у белых умеренное преимущество в центре |
| 51 | у черных умеренное преимущество в центре |
| 52 | у белых решающее преимущество в центре |
| 53 | у черных решающее преимущество в центре |
| 54 | у белых небольшое преимущество на королевском фланге |
| 55 | у черных небольшое преимущество на королевском фланге |
| 56 | у белых умеренное преимущество на королевском фланге |
| 57 | у черных умеренное преимущество на королевском фланге |
| 58 | у белых решающее преимущество на королевском фланге |
| 59 | у черных решающее преимущество на королевском фланге |
| 60 | у белых небольшое преимущество на ферзевом фланге |
| 61 | у черных небольшое преимущество на ферзевом фланге |
| 62 | у белых умеренное преимущество на ферзевом фланге |
| 63 | у черных умеренное преимущество на ферзевом фланге |
| 64 | у белых решающее преимущество на ферзевом фланге |
| 65 | у черных решающее преимущество на ферзевом фланге |
| 66 | у белых уязвимая первая горизонталь |
| 67 | у черных уязвимая первая (восьмая) горизонталь |
| 68 | у белых хорошо защищенная первая горизонталь |
| 69 | у черных хорошо защищенная первая (восьмая) горизонталь |
| 70 | у белых плохо защищенный король |
| 71 | у черных плохо защищенный король |
| 72 | у белых хорошо защищенный король |
| 73 | у черных хорошо защищенный король |
| 74 | у белых плохо расположен король |
| 75 | у черных плохо расположен король |
| 76 | у белых хорошо расположен король |
| 77 | у черных хорошо расположен король |
| 78 | у белых очень слабая пешечная структура |
| 79 | у черных очень слабая пешечная структура |
| 80 | у белых умеренно слабая пешечная структура |
| 81 | у черных умеренно слабая пешечная структура |
| 82 | у белых умеренно сильная пешечная структура |
| 83 | у черных умеренно сильная пешечная структура |
| 84 | у белых очень сильная пешечная структура |
| 85 | у черных очень сильная пешечная структура |
| 86 | у белых плохо расположен конь |
| 87 | у черных плохо расположен конь |
| 88 | у белых хорошо расположен конь |
| 89 | у черных хорошо расположен конь |
| 90 | у белых плохо расположен слон |
| 91 | у черных плохо расположен слон |
| 92 | у белых хорошо расположен слон |
| 93 | у черных хорошо расположен слон |
| 94 | у белых плохо расположена ладья |
| 95 | у черных плохо расположена ладья |
| 96 | у белых хорошо расположена ладья |
| 97 | у черных хорошо расположена ладья |
| 98 | у белых плохо расположена ферзь |
| 99 | у черных плохо расположена ферзь |
| 100 | у белых хорошо расположена ферзь |
| 101 | у черных хорошо расположена ферзь |
| 102 | у белых плохая координация фигур |
| 103 | у черных плохая координация фигур |
| 104 | у белых хорошая координация фигур |
| 105 | у черных хорошая координация фигур |
| 106 | Белые очень плохо сыграли в дебюте |
| 107 | Черные очень плохо сыграли в дебюте |
| 108 | Белые плохо сыграли в дебюте |
| 109 | Черные плохо сыграли в дебюте |
| 110 | Белые хорошо сыграли в дебюте |
| 111 | Черные хорошо сыграли в дебюте |
| 112 | Белые очень хорошо сыграли в дебюте |
| 113 | Черные очень хорошо сыграли в дебюте |
| 114 | Белые очень плохо сыграли в миттельшпиле |
| 115 | Черные очень плохо сыграли в миттельшпиле |
| 116 | Белые плохо сыграли в миттельшпиле |
| 117 | Черные плохо сыграли в миттельшпиле |
| 118 | Белые хорошо сыграли в миттельшпиле |
| 119 | Черные хорошо сыграли в миттельшпиле |
| 120 | Белые очень хорошо сыграли в миттельшпиле |
| 121 | Черные очень хорошо сыграли в миттельшпиле |
| 122 | Белые очень плохо сыграли в эндшпиле |
| 123 | Черные очень плохо сыграли в эндшпиле |
| 124 | Белые плохо сыграли в эндшпиле |
| 125 | Черные плохо сыграли в эндшпиле |
| 126 | Белые хорошо сыграли в эндшпиле |
| 127 | Черные хорошо сыграли в эндшпиле |
| 128 | Белые очень хорошо сыграли в эндшпиле |
| 129 | Черные очень хорошо сыграли в эндшпиле |
| 130 | У белых есть небольшая контригра |
| 131 | У черных есть небольшая контригра |
| 132 | У белых есть умеренная контригра |
| 133 | У черных есть умеренная контригра |
| 134 | У белых есть решающая контригра |
| 135 | У черных есть решающая контригра |
| 136 | У белых умеренное давление времени |
| 137 | У черных умеренное давление времени |
| 138 | У белых сильное давление времени |
| 139 | У черных сильное давление времени |

## 11: Имена файлов и каталогов

Имена файлов, выбранные для данных PGN, должны быть информативными и переносимыми. Имена каталогов и их расположение также должны быть выбраны по тем же причинам и для удобства навигации.

Некоторые предложенные имена файлов и каталогов могут быть трудными или невозможными для представления на определенных вычислительных системах. Использование соответствующих обычаев преобразования (конвертации) имен приветствуется.

### 11.1: Суффикс имени файла для данных PGN

Для ASCII-текстовых файлов, содержащих данные PGN, рекомендуется использовать суффикс файла (расширение файла) `.pgn`.

### 11.2: Формирование имени файла для данных PGN для определенного игрока

Партии PGN для определенного игрока должны иметь имя файла, состоящее из фамилии игрока, за которым следует суффикс `.pgn`.

### 11.3: Формирование имени файла для данных PGN для определенного события

Партии PGN для определенного события должны иметь имя файла, состоящее из названия события, за которым следует суффикс `.pgn`.

### 11.4: Формирование имени файла для данных PGN для хронологически упорядоченных партий

Файлы с данными PGN для хронологически упорядоченных (сначала старые) архивов используют информацию о дате в качестве корневых строк имен файлов. Файл, содержащий все партии PGN за определенный год, будет иметь восьмизначное имя в формате "YYYY.pgn". Файл, содержащий данные PGN за определенный месяц, будет иметь десятизначное имя в формате "YYYYMM.pgn". Наконец, файл с данными PGN за один день будет иметь двенадцатизначное имя в формате "YYYYMMDD.pgn". Большие файлы разбиваются на более мелкие файлы по мере необходимости.

Поскольку файлы с данными обычно упорядочены в хронологическом порядке, партий с отсутствующими или неполными данными тегов Date следует избегать. Любые символы вопроса в значении тега Date будут рассматриваться как нулевые цифры для сравнения при сортировке в файле и также для именования файлов.

Большие объемы данных PGN, упорядоченные по хронологии, должны быть организованы в иерархические каталоги. Каталог, содержащий все данные PGN за определенный год, должен иметь имя из четырех символов в формате "YYYY"; каталоги, содержащие файлы PGN за определенный месяц, должны иметь шестизначное имя в формате "YYYYMM".

### 11.5: Рекомендуемая организация дерева каталогов

Предлагается следующая организация каталогов для ftp-сайтов и записи на цифровых носителях:

- `PGN`: корневой каталог поддерева PGN (`pub/chess/Game-Databases/PGN`)
- `PGN/Events`: каталог файлов PGN, каждый для определенного события
- `PGN/Events/News`: новости и статус коллекции событий
- `PGN/Events/ReadMe`: краткое описание содержимого локального каталога
- `PGN/MGR`: каталог поддерева Master Games Repository
- `PGN/MGR/News`: новости и статус всего поддерева PGN/MGR
- `PGN/MGR/ReadMe`: краткое описание содержимого локального каталога
- `PGN/MGR/YYYY`: каталог игр или поддеревьев для года YYYY
- `PGN/MGR/YYYY/ReadMe`: описание локального каталога для года YYYY
- `PGN/MGR/YYYY/News`: новости и статус данных за год YYYY
- `PGN/News`: новости и статус всего поддерева PGN
- `PGN/Players`: каталог файлов PGN, каждый для определенного игрока
- `PGN/Players/News`: новости и статус коллекции игроков
- `PGN/Players/ReadMe`: краткое описание содержимого локального каталога
- `PGN/ReadMe`: краткое описание содержимого локального каталога
- `PGN/Standard`: стандарт PGN (этот документ)
- `PGN/Tools`: программные утилиты для доступа к данным PGN

## 12: Последовательность сортировки PGN

В данной секции описывается стандартный порядок сортировки игр PGN в файле. Эта сортировка основана на восьми ключах; это семь значений тегов STR и сам текст хода.

Первый (наиболее важный, первичный ключ) - это тег Date. Ранее датированные игры появляются раньше игр, сыгранных позже. Это поле сортируется сначала по возрастанию числового значения, сначала год, затем месяц и, наконец, день месяца. Символы запроса, используемые для неизвестных цифровых значений даты, будут рассматриваться как нулевые цифровые символы для сравнения при сортировке.

Второй ключ - это тег Event. Он сортируется в порядке возрастания ASCII.

Третий ключ - это тег Site. Он сортируется в порядке возрастания ASCII.

Четвертый ключ - это тег Round. Он сортируется в порядке возрастания числового значения, используемого для обозначения раунда игры. Запрос или дефис, используемые для раунда, упорядочиваются перед любым целочисленным значением. Символ запроса упорядочивается перед символом дефиса.

Пятый ключ - это тег White. Он сортируется в порядке возрастания ASCII.

Шестой ключ - это тег Black. Он сортируется в порядке возрастания ASCII.

Седьмой ключ - это тег Result. Он сортируется в порядке возрастания ASCII.

Восьмой ключ - это сам текст хода. Он сортируется в порядке возрастания ASCII со всем текстом, включая пробелы и символы новой строки.

## 13: Программное Обеспечение для PGN

> __Замечание:__ данная секция содержит информацию, которая может быть устаревшей.

Этот раздел описывает некоторое программное обеспечение PGN, которое либо уже доступно, либо ожидается в ближайшем будущем. Записи представлены примерно в хронологическом порядке их известности координатору стандарта PGN. Авторы программного обеспечения PGN призываются связаться с координатором (адрес электронной почты указан в начале этого документа), чтобы информация могла быть включена в этот раздел.

В дополнение к стандарту PGN существуют два других стандарта шахматного программного обеспечения, которые могут быть интересны шахматистам и разработчикам шахматного программного обеспечения. Это стандарт FEN (Forsyth-Edwards Notation) для обозначения позиций и стандарт EPD (Extended Position Description) для подробного описания позиций для автоматизированной обработки между программами. Они описаны в следующем разделе этого документа.

Некоторые программы для работы с PGN являются бесплатными и могут быть получены с ftp-сайтов и других источников. Другие программы PGN являются коммерческими и поставляются вместе с коммерческими шахматными программами и менеджерами баз данных шахмат. Те, кто заинтересованы в распространении стандарта PGN, призываются поддерживать производителей шахматного программного обеспечения, использующих стандарт. Если конкретный поставщик не предлагает совместимость с PGN, вероятно, что несколько писем к ним вместе с копией этой спецификации помогут им решить включить поддержку PGN в свой следующий выпуск.

Работники Университета Оклахомы в Нормане (США) любезно предоставили ftp-сайт (chess.uoknor.edu) для хранения данных и программ, связанных с шахматами. Поскольку имена файлов меняются со временем, тем, кто обращается к сайту, рекомендуется сначала получить файл "pub/chess/ls-lR.gz" для текущего списка. Сканирование этого списка также поможет найти версии программ PGN для типов машин и операционных систем, отличных от перечисленных ниже. Дополнительную информацию об этом архиве можно получить у его администратора, Криса Петроффа (chris@uoknor.edu).

Для европейских пользователей доброжелательный персонал Университета Гамбурга (Германия) предоставил ftp-сайт ftp.math.uni-hamburg.de; он содержит ежедневное зеркало каталога pub/chess на сайте chess.uoknor.edu.

### 13.1: Набор SAN

"Набор SAN" - это набор исходных текстов ANSI C для программирования шахмат, доступный бесплатно с ftp-сайта chess.uoknor.edu в каталоге pub/chess/Unix в файле "SAN.tar.gz" (архив gzip tar). Этот набор содержит код для импорта и экспорта PGN и может использоваться для "регуляризации" данных PGN в сокращенный формат экспорта с помощью команды `tfgg`. Набор SAN также поддерживает ввод-вывод FEN. Код из этого набора свободно распространяется для всех, пока будущее распространение не будет затруднено для всех. Набор SAN находится в процессе непрерывного развития, хотя даты будущих поставок довольно трудно предсказать, и выпуски иногда появляются через месяцы. Предложения и комментарии следует направлять его автору, Стивену Дж. Эдвардсу (sje@world.std.com).

### 13.2: pgnRead

Программа "pgnRead" работает под MS Windows 3.1 и предоставляет интерактивный графический пользовательский интерфейс для сканирования файлов данных PGN. Эта программа включает в себя красочное отображение шахматной доски с фигурами и прокруткой для выбора игры и текста игры. Она доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/DOS; несколько версий доступны под именами вида `pgnrd**.exe`; последняя на момент написания этого документа - "PGNRD130.EXE". Предложения и комментарии следует направлять его автору, Киту Фуллеру (keithfx@aol.com).

### 13.3: mail2pgn/GIICS

Программа `mail2pgn` создает версию PGN данных шахматной игры, сгенерированных ICS (Internet Chess Server). Ее можно найти на ftp-сайте chess.uoknor.edu в каталоге pub/chess/DOS в файле "mail2pgn.zip". Версия на языке C находится в каталоге pub/chess/Unix в файле "mail2pgn.c". Предложения и комментарии следует направлять его автору, Джону Аронсону (aronson@helios.ece.arizona.edu). Сообщается, что этот код был включен в GIICS (Graphical Interface for the ICS); предложения и комментарии следует направлять его автору, Тони Асеро (ace3@midway.uchicago.edu).

Было сообщено, что mail2pgn был заменен новой программой "MV2PGN", описанной ниже.

### 13.4: XBoard

Программа `XBoard` - это комплексное шахматное утилита, работающая под X Window System, предоставляющая графический пользовательский интерфейс в портативной манере. Новая версия теперь обрабатывает данные PGN. Она доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/X в файле "xboard-3.0.pl9.tar.gz". Предложения и комментарии следует направлять его автору, Тиму Манну (mann@src.dec.com).

### 13.5: cupgn

Программа `cupgn` преобразует данные игры, хранящиеся в формате ChessBase, в PGN. Она доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/Game-Databases/CBUFF в файле "cupgn.tar.gz". Другая версия находится в каталоге pub/chess/DOS в файле "cupgn120.exe". Предложения и комментарии следует направлять его автору, Анджо Анджевиердену (anjo@swi.psy.uva.nl).

### 13.6: Zarkov

Текущая версия (3.0) коммерческой программы для игры в шахматы "Zarkov" может читать и записывать игры, используя PGN. Эта программа также может использовать стандарт EPD для обмена данными с другими программами, поддерживающими EPD. Исторически, Zarkov - это первая программа, использующая EPD. Предложения и комментарии следует направлять его автору, Джону Стэнбеку (jhs@icbdfcs1.fc.hp.com).

Поставщиком для Северной Америки является:

```text
    International Chess Enterprises
    P.O. Box 19457
    Seattle, WA 98109
    USA
    (800) 262-4277
```

Поставщиком для Европы является:

```text
    Gambit-Soft
    Feckenhauser Strasse 27
    D-78628 Rottweil
    GERMANY
    49-741-21573
```

### 13.7: Chess Assistant

Следующая версия многофункциональной коммерческой программы базы данных "Chess Assistant" сможет использовать стандарт PGN в качестве опции импорта и экспорта. Существует сообщение о программе бесплатного использования "PGN2CA", которая преобразует базы данных PGN в формат Chess Assistant. Для получения дополнительной информации контактное лицо - Виктор Захаров, один из членов команды разработчиков Chess Assistant (VICTOR@ldis.cs.msu.su).

Поставщиком для Северной Америки является:

```text
    International Chess Enterprises
    P.O. Box 19457
    Seattle, WA 98109
    USA
    (800) 262-4277
```

### 13.8: BOOKUP

Издание для MS-DOS многофункциональной коммерческой программы "BOOKUP", версия 8.1, способно использовать стандарт EPD для обмена данными с другими программами, поддерживающими EPD. Она также может быть совместима с PGN.

Заметки BOOKUP 8.1.1 Addenda от 1993.12.17 предоставляют подробную информацию о том, как использовать EPD в сочетании с аналитическими программами, такими как Zarkov и HIARCS. В частности, возможности поиска и оценки программы аналитика объединяются с возможностями организации информации программы базы данных BOOKUP для оценки позиций. Это делается сначала путем экспорта базы данных BOOKUP в формат EPD, затем анализом каждой записи EPD программой аналитика с числовой оценкой, а затем импортом измененного файла EPD BOOKUP. BOOKUP может затем применить минимаксирование к импортированной базе данных; это приводит к оценкам из терминальных позиций, распространяющимся обратно к более ранним позициям и даже к ходам из начального массива.

По некоторым причинам, BOOKUP называет этот процесс "обратным решением", но это действительно просто стандартное минимаксирование. В любом случае, это хороший пример того, как различные программы от разных авторов, выполняющие разные типы задач, могут быть интегрированы с помощью общего, не проприетарного стандарта. Это позволяет новому набору мощных функций, которые выходят за рамки возможностей любой из отдельных компонентных программ.

BOOKUP позволяет некоторую настройку действий EPD. Одна из таких настроек - требование, чтобы позиционные оценки следовали стандарту EPD; это означает, что оценка всегда дается с точки зрения активного игрока. Это объясняется более подробно в разделе о коде "ce" (оценка в сотых долях пешки) в описании EPD в следующем разделе этого документа. Чтобы гарантировать, что BOOKUP обрабатывает оценки в сотых долях пешки "правильным" образом, настройка EPD "Положительно для белых" должна быть установлена на "N". Это позволяет BOOKUP работать правильно с Zarkov и со всеми другими программами, использующими "правильный" стандарт оценки в сотых долях пешки. Существует проблема с HIARCS, требующая, чтобы эта опция была установлена на "Y"; но это действительно означает, что, если это правда, HIARCS должен быть настроен на использование "правильного" стандарта оценки в сотых долях пешки.

Поставщиком для Северной Америки является:

```text
    BOOKUP
    2763 Kensington Place West
    Columbus, OH 43202
    USA
    (800) 949-5445
    (614) 263-7219
```

### 13.9: HIARCS

Текущая версия (2.1) коммерчесской программы для игры в шахматы "HIARCS" способна использовать стандарт EPD для обмена данными с другими программами, поддерживающими EPD. Она также может быть совместима с PGN. Подробности появятся здесь по мере их поступления.

Поставщиком для Северной Америки является:

```text
    HIARCS
    c/o BOOKUP
    2763 Kensington Place West
    Columbus, OH 43202
    USA
    (800) 949-5445
    (614) 263-7219
```

### 13.10: Deja Vu

База данных шахмат `Deja Vu` от ChessWorks - это совместимая с PGN коллекция из более чем 300 000 игр. Она доступна только на CD-ROM и запланирована к выпуску в 1994.05 году с периодическими обновлениями впоследствии. Вводная цена - 329 долларов США. Для получения дополнительной информации можно связаться по электронной почте с авторами - Джон Крейтон и Эрик Шиллер (chesswks@netcom.com).

### 13.11: MV2PGN

Программа `MV2PGN` может использоваться для преобразования данных игры, сгенерированных как текущими, так и старыми версиями GIICS (Graphical Interface - Internet Chess Server). Программа включена в самораспаковывающийся архив, доступный с ftp-сайта chess.uoknor.edu в каталоге pub/chess/DOS в файле "ics2pgn.exe". Исходный код также включен. Эта программа сообщается заменяет старую программу "mail2pgn" и была необходима из-за изменения формата записи ICS в конце 1993 года. Для получения дополнительной информации о MV2PGN контактное лицо - Гари Бастин (gbastin@x102a.ess.harris.com).

### 13.12: Утилиты Хансена (cb2pgn, nic2pgn, pgn2cb, pgn2nic)

Утилиты Хансена используются для преобразования между различными форматами представления данных шахмат. Связанные с PGN программы включают: "cb2pgn.exe" (преобразование ChessBase в PGN), "nic2pgn.exe" (преобразование NIC в PGN), "pgn2cb.exe" (преобразование PGN в ChessBase) и "pgn2nic.exe" (преобразование PGN в NIC).

Утилиты, связанные с ChessBase (cb2pgn/pgn2cb), находятся на chess.uoknor.edu в каталоге pub/chess/Game-Databases/ChessBase.

Утилиты, связанные с NIC (nic2pgn/pgn2nic), находятся на chess.uoknor.edu в каталоге pub/chess/Game-Databases/NIC.

Для получения дополнительной информации о утилитах Хансена контактное лицо - автор, Карстен Хансен (ch0506@hdc.hha.dk).

### 13.13: База данных Slappy

"Slappy the Database" - это коммерческая шахматная база данных и программа перевода, запланированная к выпуску не ранее конца 1994 года. Это недорогая утилита с простым символьным интерфейсом, предназначенная для тех, кто хочет поддерживаемый продукт, но не нуждается (или не может позволить) в полноценной программе с графическим пользовательским интерфейсом. Две самые важные функции Slappy - это способность пакетной обработки и полная реализация каждого стандарта, описанного в этом документе. Версии Slappy the Database будут предоставлены для различных платформ, включая: Intel 386/486 Unix, Apple Macintosh и MS-DOS.

Slappy также может быть полезен для тех, кто имеет полноценную программу, но также нуждается в выполнении времязатратных задач шахматной базы данных на запасном компьютере.

Пожелания и комментарии следует направлять его автору, Стивену Дж. Эдвардсу (sje@world.std.com). Более подробная информация появится здесь по мере ее поступления.

### 13.14: CBASCII

"CBASCII" - это общая утилита для преобразования шахматных данных между форматом ChessBase и ASCII. Она имеет возможность PGN и доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/DOS в файле "cba1_2.zip". Контактное лицо - автор программы, Энди Дюплэн (duplain@btcs.bt.co.uk).

### 13.15: ZZZZZZ

"ZZZZZZ" - это программа для игры в шахматы, включая исходный код, которая также включает некоторые функции базы данных. Сообщается, что последняя версия имеет возможности PGN и EPD. Она доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/Unix в файле "zzzzzz-3.2b1.tar.gz". Контактное лицо - автор, Гийсберт Висенекер (wiesenecker@sara.nl).

### 13.16: icsconv

Программа "icsconv" может использоваться для преобразования игр Internet Chess Server, как старого, так и нового формата, в PGN. Она доступна с ftp-сайта chess.uoknor.edu в каталоге pub/chess/Game-Databases/PGN/Tools в файле "icsconv.exe". Контактное лицо - автор, Кевин Номура (chow@netcom.com).

### 13.17: CHESSOP (CHESSOPN/CHESSOPG)

"CHESSOP" - это база данных открытий и утилита просмотра с поддержкой чтения игр PGN. Она работает под MS-DOS и отображает позиции, а не игры. Для каждой позиции перечислены как хорошие, так и плохие ходы с соответствующей аннотацией. Транспозиции также обрабатываются. Распределенная база данных содержит более 100 000 позиций, охватывающих все общие открытия. Пользователи могут вводить свои собственные данные PGN. CHESSOP занимает 3 Мбайта жесткого диска, стоит 39 долларов США и может быть получен у:

```text
    CHESSX Software
    12 Bluebell Close
    Glenmore Park
    AUSTRALIA 2745.
```

Идеи, лежащие в основе CHESSOP, можно увидеть в CHESSOPN (псевдоним CHESSOPG), бесплатной версии на сервере ICS, которая имеет сокращенную базу открытий (25 000 позиций) и не имеет поддержки PGN или транспозиции, но в остальном аналогична CHESSOP. (Это файлы "chessopg.zip" в каталоге pub/chess/DOS на ftp-сайте chess.uoknor.edu.)

### 13.18: CAT2PGN

Программа `CAT2PGN` - это утилита, которая переводит данные из формата, используемого Chess Assistant, в PGN. Она доступна с ftp-сайта chess.uoknor.edu. Контактное лицо для CAT2PGN - его автор, Дэвид Майерс (myers@frodo.biochem.duke.edu).

### 13.19: pgn2opg

Утилита "pgn2opg" может использоваться для преобразования файлов PGN в текстовый формат, используемый программой "CHESSOPG", упомянутой выше. Хотя она не выполняет никакого семантического анализа ввода PGN, было продемонстрировано, что она правильно обрабатывает известный правильный ввод PGN. Файл можно найти в каталоге pub/chess/PGN/Tools на ftp-сайте chess.uoknor.edu. Для получения дополнительной информации автор - Дэвид Барнс (djb@ukc.ac.uk).

## 14: Архивы данных PGN

Основной репозиторий данных PGN находится на ftp-сайте chess.uoknor.edu в каталоге "pub/chess/Game-Databases/PGN". Он организован в соответствии с описанием, данном в разделе C.5 этого документа. Европейский сайт ftp.math.uni-hamburg.de также содержит регулярно обновляемую копию репозитория.

## 15: Коды стран Международного Олимпийского Комитета

Коды стран Международного Олимпийского Комитета используются для информации о стране сайта из-за их традиционного использования при отчетности о международных спортивных мероприятиях. Из-за изменений в географии и языковых обычаев некоторые из следующих могут быть неверными или устаревшими. Исправления и дополнения следует отправлять по электронной почте координатору PGN, адрес которого указан в начале этого документа.

> __Замечание:__ В русском переводе данный список был обновлен по состоянию на 2024 год и может не соответствовать оригиналу.

- _ABW_: Аруба
- _AFG_: Афганистан
- _AGO_: Ангола
- _AIA_: Ангилья
- _ALB_: Албания
- _AND_: Андорра
- _ANT_: Нидерландские Антилы
- _ARE_: Объединенные Арабские Эмираты
- _ARG_: Аргентина
- _ARM_: Армения
- _ASM_: Американское Самоа
- _ATA_: Антарктида
- _ATF_: Французские Южные Территории
- _ATG_: Антигуа и Барбуда
- _AUS_: Австралия
- _AUT_: Австрия
- _AZE_: Азербайджан
- _BDI_: Бурунди
- _BEL_: Бельгия
- _BEN_: Бенин
- _BFA_: Буркина-Фасо
- _BGD_: Бангладеш
- _BGR_: Болгария
- _BHR_: Бахрейн
- _BHS_: Багамы
- _BIH_: Босния и Герцеговина
- _BLR_: Беларусь
- _BLZ_: Белиз
- _BMU_: Бермуды
- _BOL_: Боливия
- _BRA_: Бразилия
- _BRB_: Барбадос
- _BRN_: Бруней-Даруссалам
- _BTN_: Бутан
- _BVT_: Остров Буве
- _BWA_: Ботсвана
- _CAF_: Центрально-Африканская Республика
- _CAN_: Канада
- _CCK_: Кокосовые (Килинг) острова
- _CHE_: Швейцария
- _CHL_: Чили
- _CHN_: Китай
- _CIV_: Кот Д'Ивуар
- _CMR_: Камерун
- _COD_: Конго, Демократическая Республика
- _COG_: Конго
- _COK_: Острова Кука
- _COL_: Колумбия
- _COM_: Коморы
- _CPV_: Кабо-Верде
- _CRI_: Коста-Рика
- _CUB_: Куба
- _CXR_: Остров Рождества
- _CYM_: Острова Кайман
- _CYP_: Кипр
- _CZE_: Чешская Республика
- _DEU_: Германия
- _DJI_: Джибути
- _DMA_: Доминика
- _DNK_: Дания
- _DOM_: Доминиканская Республика
- _DZA_: Алжир
- _ECU_: Эквадор
- _EGY_: Египет
- _ERI_: Эритрея
- _ESH_: Западная Сахара
- _ESP_: Испания
- _EST_: Эстония
- _ETH_: Эфиопия
- _FIN_: Финляндия
- _FJI_: Фиджи
- _FLK_: Фолклендские острова (Мальвинские)
- _FRA_: Франция
- _FRO_: Фарерские острова
- _FSM_: Микронезия, Федеративные Штаты
- _GAB_: Габон
- _GBR_: Соединенное Королевство
- _GEO_: Грузия
- _GHA_: Гана
- _GIB_: Гибралтар
- _GIN_: Гвинея
- _GLP_: Гваделупа
- _GMB_: Гамбия
- _GNB_: Гвинея-Бисау
- _GNQ_: Экваториальная Гвинея
- _GRC_: Греция
- _GRD_: Гренада
- _GRL_: Гренландия
- _GTM_: Гватемала
- _GUF_: Французская Гвиана
- _GUM_: Гуам
- _GUY_: Гайана
- _HKG_: Гонконг
- _HMD_: Остров Херд и острова Макдональд
- _HND_: Гондурас
- _HRV_: Хорватия
- _HTI_: Гаити
- _HUN_: Венгрия
- _IDN_: Индонезия
- _IND_: Индия
- _IOT_: Британская Территория в Индийском Океане
- _IRL_: Ирландия
- _IRN_: Иран, Исламская Республика
- _IRQ_: Ирак
- _ISL_: Исландия
- _ISR_: Израиль
- _ITA_: Италия
- _JAM_: Ямайка
- _JOR_: Иордания
- _JPN_: Япония
- _KAZ_: Казахстан
- _KEN_: Кения
- _KGZ_: Киргизия
- _KHM_: Камбоджа
- _KIR_: Кирибати
- _KNA_: Сент-Китс и Невис
- _KOR_: Корея, Республика
- _KWT_: Кувейт
- _LAO_: Лаосская Народно-Демократическая Республика
- _LBN_: Ливан
- _LBR_: Либерия
- _LBY_: Ливийская Арабская Джамахирия
- _LCA_: Сент-Люсия
- _LIE_: Лихтенштейн
- _LKA_: Шри-Ланка
- _LSO_: Лесото
- _LTU_: Литва
- _LUX_: Люксембург
- _LVA_: Латвия
- _MAR_: Марокко
- _MCO_: Монако
- _MDA_: Молдова, Республика
- _MDG_: Мадагаскар
- _MDV_: Мальдивы
- _MEX_: Мексика
- _MHL_: Маршалловы острова
- _MKD_: Македония, бывшая Югославская Республика
- _MLI_: Мали
- _MLT_: Мальта
- _MMR_: Мьянма
- _MNG_: Монголия
- _MNP_: Северные Марианские острова
- _MOZ_: Мозамбик
- _MRT_: Мавритания
- _MSR_: Монтсеррат
- _MTQ_: Мартиника
- _MUS_: Маврикий
- _MWI_: Малави
- _MYS_: Малайзия
- _MYT_: Майотта
- _NAM_: Намибия
- _NCL_: Новая Каледония
- _NER_: Нигер
- _NFK_: Остров Норфолк
- _NGA_: Нигерия
- _NIC_: Никарагуа
- _NIU_: Ниуэ
- _NLD_: Нидерланды
- _NOR_: Норвегия
- _NPL_: Непал
- _NRU_: Науру
- _NZL_: Новая Зеландия
- _OMN_: Оман
- _PAK_: Пакистан
- _PAN_: Панама
- _PCN_: Питкерн
- _PER_: Перу
- _PHL_: Филиппины
- _PLW_: Палау
- _PNG_: Папуа-Новая Гвинея
- _POL_: Польша
- _PRI_: Пуэрто-Рико
- _PRK_: Корея, Народно-Демократическая Республика
- _PRT_: Португалия
- _PRY_: Парагвай
- _PYF_: Французская Полинезия
- _QAT_: Катар
- _REU_: Реюньон
- _ROU_: Румыния
- _RUS_: Россия
- _RWA_: Руанда
- _SAU_: Саудовская Аравия
- _SCG_: Сербия и Черногория
- _SDN_: Судан
- _SEN_: Сенегал
- _SGP_: Сингапур
- _SGS_: Южная Джорджия и Южные Сандвичевы острова
- _SHN_: Святая Елена
- _SJM_: Шпицберген и Ян Майен
- _SLB_: Соломоновы острова
- _SLE_: Сьерра-Леоне
- _SLV_: Сальвадор
- _SMR_: Сан-Марино
- _SOM_: Сомали
- _SPM_: Сен-Пьер и Микелон
- _STP_: Сан-Томе и Принсипи
- _SUR_: Суринам
- _SVK_: Словакия
- _SVN_: Словения
- _SWE_: Швеция
- _SWZ_: Свазиленд
- _SYC_: Сейшелы
- _SYR_: Сирийская Арабская Республика
- _TCA_: Острова Теркс и Кайкос
- _TCD_: Чад
- _TGO_: Того
- _THA_: Таиланд
- _TJK_: Таджикистан
- _TKL_: Токелау
- _TKM_: Туркмения
- _TLS_: Тимор-Лесте
- _TON_: Тонга
- _TTO_: Тринидад и Тобаго
- _TUN_: Тунис
- _TUR_: Турция
- _TUV_: Тувалу
- _TZA_: Танзания, Объединенная Республика
- _UGA_: Уганда
- _UKR_: Украина
- _URY_: Уругвай
- _USA_: Соединенные Штаты
- _UZB_: Узбекистан
- _VAT_: Ватикан
- _VCT_: Сент-Винсент и Гренадины
- _VEN_: Венесуэла
- _VGB_: Виргинские острова, Британские
- _VIR_: Виргинские острова, США
- _VNM_: Вьетнам
- _VUT_: Вануату
- _WLF_: Уоллис и Футуна
- _WSM_: Самоа
- _YEM_: Йемен
- _ZAF_: Южная Африка
- _ZMB_: Замбия
- _ZWE_: Зимбабве

## 16: Дополнительные стандарты шахматных данных

Хотя PGN используется для хранения игр, существуют другие стандарты представления данных для других шахматных целей. Два важных стандарта - это FEN и EPD, оба описаны в этом разделе.

### 16.1: FEN

FEN (Forsyth-Edwards Notation - Нотация Форсайта-Эдвардса) - это стандарт для описания шахматных позиций с использованием набора символов ASCII.

Одна запись FEN использует одну текстовую строку переменной длины, состоящую из шести полей данных. Первые четыре поля спецификации FEN такие же, как и первые четыре поля спецификации EPD.

Текстовый файл, состоящий исключительно из записей FEN, должен иметь имя файла с расширением ".fen".

#### 16.1.1: История

FEN основан на стандарте 19-го века для записи позиций, разработанном шотландцем Дэвидом Форсайтом, журналистом. Оригинальный стандарт Форсайта был немного расширен для использования с шахматным программным обеспечением Стивеном Эдвардсом с помощью комментаторов в Интернете. Этот новый стандарт, FEN, был впервые реализован в SAN Kit Эдвардса.

#### 16.1.2: Применение позиционной нотации

Иметь стандартную нотацию позиции особенно важно для шахматных программистов, поскольку это позволяет им обмениваться базами данных позиций. Например, существуют стандартные базы данных позиций с многими классическими бенчмарк-тестами для шахматных программ, и, используя общий формат нотации позиции, можно сэкономить много часов утомительного ввода данных. Кроме того, нотация позиции может быть полезна для программ верстки страниц и для подтверждения статуса позиции для соревнований по электронной почте.

Много интересных наборов шахматных задач, представленных с использованием FEN, можно найти на ftp-сайте chess.uoknor.edu в каталоге pub/chess/SAN_testsuites.

#### 16.1.3: Поля данных

FEN определяет положение фигур, цвет хода, возможность рокировки, возможность взятия на проходе, количество полуходов с последнего взятия или хода пешки и номер хода. Это все помещается на одной текстовой строке в легко читаемом формате. Длина описания позиции FEN может немного варьироваться в зависимости от позиции. В некоторых случаях описание может быть длиной в восемьдесят или более символов и поэтому может неудобно помещаться на некоторых дисплеях. Однако такие позиции не слишком часты.

Описание позиции FEN состоит из шести частей. Каждая часть состоит только из непустых печатных символов ASCII. Смежные части разделяются одним символом пробела ASCII.

##### 16.1.3.1: Данные о расположении фигур

Первая часть записи FEN представляет расположение фигур на доске. Содержимое доски указывается, начиная с восьмого ряда и заканчивая первым рядом. Для каждого ряда квадраты указываются от файла a до файла h. Белые фигуры идентифицируются заглавными буквами SAN (`PNBRQK`), а черные фигуры идентифицируются строчными буквами SAN (`pnbrqk`). Пустые квадраты представлены цифрами от одного до восьми; используемая цифра представляет количество смежных пустых квадратов на ряду. Символ `/` используется для разделения данных смежных рядов.

##### 16.1.3.2: Активный цвет

Вторая часть записи FEN представляет активный цвет. Используется строчная `w`, если ход белых, и строчная `b`, если ход черных.

##### 16.1.3.3: Возможность рокировки

Третья часть записи FEN представляет собой индикатор возможности рокировки. Это указывает на потенциальную будущую рокировку, которая может быть возможна или невозможна в данный момент из-за блокирующих фигур или атак противника. Если нет возможности рокировки для обеих сторон, используется одиночный символ `-`. В противном случае присутствует комбинация от одного до четырех символов. Если у белых есть возможность короткой рокировки, появляется заглавная буква `K`. Если у белых есть возможность длинной рокировки, появляется заглавная буква `Q`. Если у черных есть возможность короткой рокировки, появляется строчная буква `k`. Если у черных есть возможность длинной рокировки, появляется строчная буква `q`. Те буквы, которые появляются, будут упорядочены сначала заглавные, а затем строчные, и вторым короткая рокировка перед длинной. Между буквами нет пробелов.

##### 16.1.3.4: Поле для взятия на проходе

Четвертая часть записи FEN указывает поле для взятия на проходе. Если нет поля для взятия на проходе, то появляется одиночный символ `-`. Если есть поле для взятия на проходе, то оно представлено строчным символом вертикали, за которым следует цифра горизонтали. Очевидно, что цифра горизонтали будет `3` после двойного хода пешки белых (черные - активный цвет) или цифра `6` после двойного хода пешки черных (белые - активный цвет).

Поле для взятия на проходе указывается только в том случае, если последний ход был ходом пешки на два поля. Поэтому поле для взятия на проходе может иметь имя поля даже в том случае, если нет пешки противоположной стороны, которая могла бы немедленно выполнить взятие на проходе.

##### 16.1.3.5: Счетчик полуходов

Пятая часть записи FEN - это неотрицательное целое число, представляющее счетчик полуходов. Это число - это количество полуходов (или пли) с момента последнего хода пешки или взятия. Это значение используется для правила ничьи на пятьдесят ходов.

##### 16.1.3.5: Номер хода

Шестая и последняя часть - это положительное целое число, представляющее номер хода. Оно будет иметь значение `1` для первого хода партии как для белых, так и для черных. Оно увеличивается на единицу непосредственно после каждого хода черных.

#### 16.1.4: Примеры

Вот FEN для начальной позиции:

```fen
rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
```

После хода 1. e4:

```fen
rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1
```

И затем после 1. ... c5:

```fen
rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 2
```

И затем после 2. Nf3:

```fen
rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2
```

Для двух королей на своих начальных клетках и белой пешки на e2 (ход белых) с тридцать восемью полными ходами, сделанными с пяти полуходов с момента последнего хода пешки или взятия:

```fen
4k3/8/8/8/8/8/4P3/4K3 w - - 5 39
```

### 16.2: EPD

EPD (Extended Position Description - Расширенное Описание Позиции) - это стандарт для описания шахматных позиций вместе с расширенным набором структурированных значений атрибутов с использованием набора символов ASCII. Он предназначен для обмена данными и командами между шахматными программами. Он также предназначен для представления переносимых репозиториев библиотек дебютов.

Одна запись EPD использует одну текстовую строку переменной длины, состоящую из четырех полей данных, за которыми следуют ноль или более операций. Четыре поля спецификации EPD такие же, как и первые четыре поля спецификации FEN.

Текстовый файл, состоящий исключительно из записей EPD, должен иметь имя файла с расширением ".epd".

#### 16.2.1: История

EPD основан в части на более раннем стандарте FEN; в него добавлены расширения для использования с библиотеками дебютов и также для общего обмена данными и командами между продвинутыми шахматными программами. EPD был разработан Джоном Стэнбеком и Стивеном Эдвардсом; его первая реализация была в программе Стэнбека мастерской силы Zarkov.

#### 16.2.2: Использование расширенной нотации позиции

Как и FEN, EPD используется для общего описания позиции. Однако, в отличие от FEN, EPD предназначен для расширения путем добавления новых операций, обеспечивающих новые функции по мере необходимости.

Много интересных наборов шахматных задач, представленных с использованием EPD, можно найти на ftp-сайте chess.uoknor.edu в каталоге pub/chess/SAN_testsuites.

#### 16.2.3: Data fields

Запись EPD определяет расположение фигур, цвет хода, возможность рокировки и возможность взятия на проходе. Эти данные помещаются на одну текстовую строку в легко читаемом формате. Длина описания позиции EPD может немного варьироваться в зависимости от позиции и любых связанных операций. В некоторых случаях описание может быть длиной в восемьдесят или более символов и поэтому может неудобно помещаться на некоторых дисплеях. Впрочем, большинство описаний EPD передаются только между программами и обычно не видятся пользователями программы.

(Примечание: из-за вероятности будущего расширения EPD рекомендуется, чтобы реализаторы имели возможность обрабатывать текстовые строки EPD длиной до 1024 символов.)

Каждое поле данных EPD состоит только из непустых печатных символов ASCII. Смежные поля данных разделяются одним символом пробела ASCII.

##### 16.2.3.1: Данные о расположении фигур

Первая часть EPD представляет собой расположение фигур на доске. Содержимое доски указывается, начиная с восьмого ряда и заканчивая первым рядом. Для каждого ряда квадраты указываются от файла a до файла h. Белые фигуры идентифицируются заглавными буквами SAN (`PNBRQK`), а черные фигуры идентифицируются строчными буквами SAN (`pnbrqk`). Пустые квадраты представлены цифрами от одного до восьми; используемая цифра представляет количество смежных пустых квадратов на ряду. Символ `/` используется для разделения данных смежных рядов.

##### 16.2.3.2: Активный цвет

Вторая часть представляет собой активный цвет. Используется строчная `w`, если ход белых, и строчная `b`, если ход черных.

##### 16.2.3.3: Возможность рокировки

Третья часть записи EPD описывает возможность рокировки. Она указывает на потенциальную будущую рокировку, которая может быть возможна или невозможна в данный момент из-за блокирующих фигур или атак противника. Если нет возможности рокировки для обеих сторон, используется одиночный символ `-`. В противном случае присутствует комбинация от одного до четырех символов. Если у белых есть возможность короткой рокировки, появляется заглавная буква `K`. Если у белых есть возможность длинной рокировки, появляется заглавная буква `Q`. Если у черных есть возможность короткой рокировки, появляется строчная буква `k`. Если у черных есть возможность длинной рокировки, появляется строчная буква `q`. Те буквы, которые появляются, будут упорядочены сначала заглавные, а затем строчные, и вторым короткая рокировка перед длинной. Между буквами нет пробелов.

##### 16.2.3.4: Поле для взятия на проходе

Четвертая часть записи EPD представляет собой поле для взятия на проходе. Если нет поля для взятия на проходе, то появляется одиночный символ `-`. Если есть поле для взятия на проходе, то оно представлено строчным символом вертикали, за которым следует цифра горизонтали. Очевидно, что цифра горизонтали будет `3` после двойного хода пешки белых (черные - активный цвет) или цифра `6` после двойного хода пешки черных (белые - активный цвет).

Поле для взятия на проходе указывается только в том случае, если последний ход был ходом пешки на два поля. Поэтому поле для взятия на проходе может иметь имя поля даже в том случае, если нет пешки противоположной стороны, которая могла бы немедленно выполнить взятие на проходе.

#### 16.2.4: Операции

Операция EPD состоит из кода операции, за которой следуют ноль или более операндов и завершается точкой с запятой.

Множество операций разделяется одним пробелом. Если в строке EPD присутствует хотя бы одна операция, она отделяется от последнего (четвертого) поля данных одним пробелом.

##### 16.2.4.1: Общий формат

Код операции - это идентификатор, начинающийся с буквенного символа и может быть дополнен до четырнадцати других символов. Каждый дополнительный символ может быть буквой или цифрой или символом подчеркивания.

Операнд - это либо набор смежных непустых печатных символов, либо строка. Строка - это набор смежных печатных символов, ограниченных символом кавычки с каждой стороны. Значение строки должно быть менее 256 байт данных.

Если в операции присутствует хотя бы один операнд, между кодом операции и первым операндом есть один пробел. Если в операции присутствует более одного операнда, между каждыми двумя смежными операндами есть один пробел. Если операндов нет, к коду операции добавляется символ точки с запятой, обозначающий конец операции. Если присутствуют операнды, последний операнд имеет добавленную точку с запятой, обозначающую конец операции.

Каждый код операции появляется не более одного раза в записи EPD. Несколько операций в одной записи EPD должны появляться в ASCII-порядке их идентификаторов (мнемоник). Однако программа, читающая записи EPD, может разрешить операции, не в ASCII-порядке по мнемоникам; семантика в обоих случаях одинакова.

Некоторые коды операций, позволяющие более чем один операнд, могут иметь специальные требования к порядку операндов. Например, код операции `pv` (predicted variation - предполагаемое изменение) требует, чтобы его операнды (ходы) появлялись в том порядке, в котором они будут сыграны. Все остальные коды операций, позволяющие более чем один операнд, должны иметь операнды, появляющиеся в ASCII-порядке. Примером такого набора является код операции `bm` (best move[s] - лучший ход[ы]); его операнды - это ходы, все из которых могут быть немедленно сыграны из текущей позиции.

Некоторые коды операций требуют один или более операндов, которые являются ходами шахмат. Эти ходы должны быть представлены с использованием SAN. Если используется другое представление, нет гарантии, что EPD будет прочитано правильно во время последующей обработки.

Некоторые коды операций требуют один или более операндов, которые являются целыми числами. Некоторые коды операций могут требовать, чтобы целочисленный операнд был в заданном диапазоне; подробности описаны в списке кодов операций ниже. Отрицательное целое число формируется с помощью дефиса (знак минус) перед последовательностью цифр целого числа. Можно использовать необязательный знак плюса для указания неотрицательного значения, но такое использование не требуется и даже не рекомендуется.

Некоторые коды операций требуют один или более операндов, которые являются числами с плавающей точкой. Некоторые коды операций могут требовать, чтобы операнд с плавающей точкой находился в заданном диапазоне; подробности описаны в списке кодов операций ниже. Операнд с плавающей точкой строится из необязательного знакового символа (`+` или `-`), последовательности цифр (с не менее чем одной цифрой), точки основания (всегда `.`) и конечной последовательности цифр (с не менее чем одной цифрой).

##### 16.2.4.2: Мнемоника кодов операций

Мнеоника кода операции, используемая для архивного хранения и для межпрограммного обмена, начинается с строчной буквы и состоит только из строчных букв, цифр и символа подчеркивания (т.е., без заглавных букв). Эти мнемоники также все будут длиной не менее двух символов.

Коды операций, используемые только одной программой или экспериментальным набором программ, должны начинаться с заглавной буквы. Это делается для того, чтобы их можно было легко отличить, если они случайно встретятся в других программах. Если такой "частный" код операции демонстрируется как широко полезный, его следует включить в официальный список (приведенный ниже) в виде строчной буквы.

Если программа не распознает определенный код операции, данная операция просто игнорируется; она не сигнализируется как ошибка.

#### 16.2.5: Список кодов операций

Список кодов операций EPD представлен здесь в алфавитном порядке их мнемоник. Предложения о новых кодах операций следует отправлять координатору стандартов PGN, указанному в начале этого документа.

##### 16.2.5.1: Код операции "acn": количество узлов на анализ

Код операции "acn" принимает один неотрицательный целочисленный операнд. Он используется для представления количества узлов, рассмотренных в анализе. Обратите внимание, что значение может быть довольно большим для некоторых расширенных поисков, поэтому рекомендуется использовать (по крайней мере) длинное (четырехбайтовое) представление.

##### 16.2.5.2: Код операции "acs": количество секунд на анализ

Код операции "acs" принимает один неотрицательный целочисленный операнд. Он используется для представления количества секунд, затрачиваемых на анализ. Обратите внимание, что значение может быть довольно большим для некоторых расширенных поисков, поэтому рекомендуется использовать (по крайней мере) длинное (четырехбайтовое) представление.

##### 16.2.5.3: Код операции "am": избегать ходов

Код операции "am" указывает на набор нуля или более ходов, все из которых могут быть немедленно сыграны из текущей позиции, которые, по мнению автора EPD, следует избегать. Каждый операнд - это ход SAN; они появляются в порядке ASCII.

##### 16.2.5.4: Код операции "bm": лучший ход

Код операции "bm" указывает на набор нуля или более ходов, все из которых могут быть немедленно сыграны из текущей позиции, которые, по мнению автора EPD, являются лучшими из доступных. Каждый операнд - это ход SAN; они появляются в порядке ASCII.

##### 16.2.5.5: Код операции "c0": комментарий (первичный, также "c1" до "c9")

Код операции "c0" (строчная буква "c", цифра ноль) указывает на комментарий верхнего уровня, который применяется к данной позиции. Это первый из десяти ранжированных комментариев, каждый из которых имеет мнемонику, составленную из строчной буквы "c" и одной десятичной цифры. Каждый из этих кодов принимает либо один строковый операнд, либо вообще не принимает операнд.

Этот десятичный набор комментариев предназначен для использования в качестве описательных комментариев для полной игры или фрагмента игры. Обычная обработка этих кодов операций следующая:

1) В начале игры (или фрагмента игры) программа сканирования последовательности ходов инициализирует каждый элемент своего набора из десяти регистров строк комментариев на null.
2) При обработке записи EPD для каждой позиции в игре операции комментариев интерпретируются слева направо. (Фактически все операции в записи EPD интерпретируются слева направо.) Поскольку операции появляются в ASCII-порядке в соответствии с их мнемоникой кода операции, код операции "c0" (если присутствует) будет обработан перед всеми остальными кодами операций, затем код операции "c1" (если присутствует) и так далее до кода операции "c9" (если присутствует).
3) Обработка кода операции "cN" (0 <= N <= 9) включает два шага. Во-первых, все регистры строк комментариев с индексом, равным или большим N, устанавливаются в null. (Это набор "cN" до "c9".) Во-вторых, и только если присутствует строковый операнд, значение соответствующего регистра строки комментариев устанавливается равным строковому операнду.

##### 16.2.5.6: Код операции "ce": оценка в сантипешках

Код операции "ce" указывает на оценку указанной позиции в сантипешках. Он принимает один операнд, который является целым числом, представляющим оценку позиции с точки зрения активного игрока; т.е. игрока, делающего ход. Положительные значения указывают на позицию, выгодную для игрока, делающего ход, в то время как отрицательные значения указывают на позицию, выгодную для пассивного игрока; т.е. игрока, не делающего ход. Значения оценки в сантипешках, близкие к нулю, указывают на нейтральную оценку позиции.

Значения оценки ограничены целыми числами, которые равны или больше $-32767$ и меньше или равны $32766$.

Значение, большее $32000$, указывает на наличие форсированного мата активного игрока. Количество полуходов до мата определяется вычитанием оценки из значения $32767$. Таким образом, выигрышный мат за N полуходов представляет собой мат за $2N - 1$ полуходов и имеет соответствующую оценку в сантипешках $(32767 - (2N - 1))$. Например, мат на текущем ходу (мат в один ход) имеет оценку в сантипешках $32766$, а мат в пять ходов имеет оценку в сантипешках $32758$.

Значение, меньшее $-32000$, указывает на наличие форсированного мата пассивного игрока. Количество полуходов до мата определяется вычитанием оценки из значения $-32767$. Таким образом, проигрышный мат за N полуходов представляет собой мат за $2N$ полуходов и имеет соответствующую оценку в сантипешках $(-32767 + (2N))$. Например, мат после хода (проигрышный мат в один ход) имеет оценку в сантипешках $-32765$, а проигрышный мат в пять ходов имеет оценку в сантипешках $-32757$.

Значение $-32767$ указывает на недопустимую позицию. Патовая позиция имеет оценку в сантипешках равную нулю, как и позиция, закончившаяся ничьей из-за недостаточного материала для мата. Любая другая позиция, известная как определенная вынужденная ничья, также имеет оценку в сантипешках равную нулю.

##### 16.2.5.7: Код операции "dm": количество ходов до прямого мата

Код операции "dm" используется для указания количества полуходов до того, как активный цвет доставит мат в указанной позиции. Он всегда принимает один операнд, который является положительным целым числом, представляющим количество полуходов. Например, позиция, известная как "мат в три хода", будет иметь операцию "dm 3;" для указания этого.

Этот код операции предназначен для использования с наборами задач, состоящих из позиций, требующих прямого нахождения мата в качестве решения.

##### 16.2.5.8: Код операции "draw_accept": принять предложение ничьи

Код операции "draw_accept" используется для указания того, что предложение ничьи, сделанное после хода, который привел к указанной позиции, принято активным игроком. Этот код операции не принимает операндов.

##### 16.2.5.9: Код операции "draw_claim": объявление ничьи

Код операции "draw_claim" используется для указания того, что активный игрок объявляет ничью. Ничья заявляется из-за третьего повторения позиции или из-за правила пятидесяти ходов или из-за недостаточного материала для мата. Также требуется указать ход (см. код операции "sm"), который также должен появиться в той же записи EPD. Код операции "draw_claim" не принимает операндов.

##### 16.2.5.10: Код операции "draw_offer": предложение ничьи

Код операции "draw_offer" используется для указания того, что ничья предлагается активным игроком. Также требуется указать ход (см. код операции "sm"), который также должен появиться в той же записи EPD. Код операции "draw_offer" не принимает операндов.

##### 16.2.5.11: Код операции "draw_reject": отклонение предложенной ничьи

Код операции "draw_reject" используется для указания того, что предложение ничьи, сделанное после хода, который привел к указанной позиции, отклонено активным игроком. Этот код операции не принимает операндов.

##### 16.2.5.12: Код операции "eco": код дебюта из "Энциклопедия шахматных дебютов"

Код операции "eco" используется для ассоциации обозначения дебюта из таксономии "Энциклопедия шахматных дебютов" с указанной позицией. Код операции принимает либо один строковый операнд (название дебюта ECO), либо вообще не принимает операндов. Если операнд присутствует, его значение ассоциируется с регистром строки "ECO" программы сканирования. Если операнда нет, регистр строки "ECO" программы сканирования устанавливается в null.

Использование аналогично использованию пары тегов "ECO" из стандарта PGN.

##### 16.2.5.13: Код операции "fmvn": номер хода

Код операции "fmvn" представляет номер хода, связанный с позицией. Он всегда принимает один операнд, который является положительным целым числом номера хода.

Этот код операции используется для явного представления номера хода в EPD, который по умолчанию присутствует в FEN как шестое поле. Информация о номере хода обычно опущена из EPD, потому что она не влияет на генерацию ходов (что обычно требуется для задач, использующих EPD), но она влияет на нотацию партии (что обычно требуется для задач, использующих FEN). Из-за желания оптимизации пространства для больших файлов EPD номера ходов были исключены из родительского FEN файла для EPD. Информация о количестве ходов была исключена аналогичным образом.

##### 16.2.5.14: Код операции "hmvc": счетчик полуходов

Код операции "hmvc" представляет счетчик полуходов, связанный с позицией. Счетчик полуходов позиции равен количеству полуходов с момента последнего хода пешки или взятия. Эта информация используется для реализации правила ничьи после пятидесяти ходов. Он всегда принимает один операнд, который является неотрицательным целым числом значения счетчика полуходов.

Этот код операции используется для явного представления счетчика полуходов в EPD, который по умолчанию присутствует в FEN как пятое поле. Информация о счетчике полуходов обычно опущена из EPD, потому что она не влияет на генерацию ходов (что обычно требуется для задач, использующих EPD), но она влияет на вопросы завершения партии (что обычно требуется для задач, использующих FEN). Из-за желания оптимизации пространства для больших файлов EPD значения счетчика полуходов были исключены из родительского FEN файла для EPD. Информация о номере хода была исключена аналогичным образом.

##### 16.2.5.15: Код операции "id": идентификация позиции

Код операции "id" используется для предоставления простой идентифицирующей метки для указанной позиции. Он принимает один строковый операнд.

Этот код операции предназначен для использования с тестовыми наборами, используемыми для измерения силы программы, играющей в шахматы. Пример "id" операнда для семисот пятидесят седьмой позиции из тысячи одной задачи в книге Райнфельда "1001 выигрышный шахматный жертв и комбинаций" будет "WCSAC.0757", а пятнадцатая позиция в двадцати четырех задачном тесте Братко-Копец будет иметь "id" операнд "BK.15".

##### 16.2.5.16: Код операции "nic": код дебюта из "New In Chess"

Код операции "nic" используется для ассоциации обозначения дебюта из таксономии "New In Chess" с указанной позицией. Код операции принимает либо один строковый операнд (название дебюта NIC), либо вообще не принимает операндов. Если операнд присутствует, его значение ассоциируется с регистром строки "NIC" программы сканирования. Если операнда нет, регистр строки "NIC" программы сканирования устанавливается в null.

Использование аналогично использованию пары тегов "NIC" из стандарта PGN.

##### 16.2.5.17: Код операции "noop": отсутствие операции

Код операции "noop" используется для указания отсутствия операции. Он принимает ноль или более операндов, каждый из которых может быть любого типа. Операция не включает обработку. Она предназначена для использования разработчиками для целей тестирования программы.

##### 16.2.5.18: Код операции "pm": предполагаемый ход

Код операции "pm" используется для предоставления одного предполагаемого хода для указанной позиции. Он имеет ровно один операнд, ход, который можно сыграть из позиции. Этот ход считается автором EPD лучшим из доступных для активного игрока.

Если непустая строка "pv" (предполагаемый вариант) также присутствует в той же записи EPD, первый ход предполагаемого изменения такой же, как и предполагаемый ход.

Код операции "pm" предназначен для использования в качестве общего механизма "отображения подсказки".

##### 16.2.5.19: Код операции "pv": предполагаемый вариант

Код операции "pv" используется для предоставления предполагаемого варианта для указанной позиции. Он имеет ноль или более операндов, представляющих последовательность ходов, которые можно сыграть из позиции. Эта последовательность считается автором EPD лучшей доступной игре.

Если непустая строка "pm" (предполагаемый ход) также присутствует в той же записи EPD, первый ход предполагаемого варианта такой же, как и предполагаемый ход.

##### 16.2.5.20: Код операции "rc": количество повторений

Код операции "rc" используется для указания количества повторений указанной позиции. Он принимает один положительный целочисленный операнд. Любая позиция, включая начальную позицию, считается имеющей значение "rc" не менее одного. Значение три указывает на кандидата для заявки на ничью по правилу повторения позиции.

##### 16.2.5.21: Код операции "resign": сдача игры

Код операции "resign" используется для указания того, что активный игрок сдался. Этот код операции не принимает операндов.

##### 16.2.5.22: Код операции "sm": предоставленный ход

Код операции "sm" используется для предоставления одного предоставленного хода для указанной позиции. Он имеет ровно один операнд, ход, который можно сыграть из позиции. Этот ход считается автором EPD ходом, который должен быть сыгран из позиции.

Код операции "sm" предназначен для использования для общения последнего сыгранного хода в активной игре. Он используется для общения ходов между программами в автоматической игре через сеть. Это включает корреспонденционную игру с использованием электронной почты и также программы, действующие в качестве сетевых интерфейсов для человеческих игроков.

##### 16.2.5.23: Код операции "tcgs": телекоммуникация: селектор игры

Код операции "tcgs" является одним из семейства кодов операций телекоммуникации, используемых для игр, проводимых по электронной почте и аналогичным способом. Этот код операции принимает один операнд, который является положительным целым числом. Он используется для выбора из различных игр, в процессе которых участвуют один и тот же отправитель и получатель.

##### 16.2.5.24: Код операции "tcri": телекоммуникация: идентификация получателя

Код операции "tcri" является одним из семейства кодов операций телекоммуникации, используемых для игр, проводимых по электронной почте и аналогичным способом. Этот код операции принимает два операнда, упорядоченные строки. Первый операнд - это адрес электронной почты получателя записи EPD. Второй операнд - это имя игрока (программы или человека) на адресе, который является фактическим получателем записи EPD.

##### 16.2.5.25: Код операции "tcsi": телекоммуникация: идентификация отправителя

Код операции "tcsi" является одним из семейства кодов операций телекоммуникации, используемых для игр, проводимых по электронной почте и аналогичным способом. Этот код операции принимает два операнда, упорядоченные строки. Первый операнд - это адрес электронной почты отправителя записи EPD. Второй операнд - это имя игрока (программы или человека) на адресе, который является фактическим отправителем записи EPD.

##### 16.2.5.26: Код операции "v0": имя варианта (первичное, также "v1" до "v9")

Код операции "v0" (строчная буква "v", цифра ноль) указывает на имя варианта верхнего уровня, применимое к данной позиции. Это первый из десяти ранжированных имен вариантов, каждое из которых имеет мнемонику, составленную из строчной буквы "v" и одной десятичной цифры. Каждый из этих кодов принимает либо один строковый операнд, либо вообще не принимает операндов.

Этот десятичный набор кодов операций предназначен для использования в качестве традиционных имен вариантов для полной игры или фрагмента игры. Обычная обработка этих кодов операций следующая:

1) В начале игры (или фрагмента игры) программа сканирования последовательности ходов инициализирует каждый элемент своего набора из десяти регистров строк имен вариантов на null.
2) При обработке записи EPD для каждой позиции в игре операции имен вариантов интерпретируются слева направо. (Фактически все операции в записи EPD интерпретируются слева направо.) Поскольку операции появляются в ASCII-порядке в соответствии с их мнемоникой кода операции, код операции "v0" (если присутствует) будет обработан перед всеми остальными кодами операций, затем код операции "v1" (если присутствует) и так далее до кода операции "v9" (если присутствует).
3) Обработка кода операции "vN" (0 <= N <= 9) включает два шага. Во-первых, все регистры строк имен вариантов с индексом, равным или большим N, устанавливаются в null. (Это набор "vN" до "v9".) Во-вторых, и только если присутствует строковый операнд, значение соответствующего регистра строки имен вариантов устанавливается равным строковому операнду.

## 17: Альтернативные буквы идентификаторов шахматных фигур

Названия фигур на английском языке используются для определения набора букв для идентификации шахматных фигур в PGN. Однако авторы программ, которые используются только для локального представления или сканирования данных о ходах шахмат, могут найти удобным использовать коды букв фигур, общие для их локалей. Это не является проблемой, пока данные PGN, которые хранятся в архивном хранилище или обмениваются между программами, все еще используют коды букв фигур SAN (английский): "PNBRQK".

Для указанных авторов предоставляется список альтернативных кодов букв фигур:

| Язык | Буквы фигур (пешка конь слон ладья ферзь король) |
| -------- | -------------------------------------------------- |
| Чешский | P J S V D K |
| Датский | B S L T D K |
| Голландский | O P L T D K |
| Английский | P N B R Q K |
| Эстонский | P R O V L K |
| Финский | P R L T D K |
| Французский | P C F T D R |
| Немецкий | B S L T D K |
| Венгерский | G H F B V K |
| Исландский | B S L T D K |
| Итальянский | P C A T D R |
| Норвежский | B S L T D K |
| Польский | P S G W H K |
| Португальский | P C B T D R |
| Румынский | P C N T D R |
| Испанский | P C A T D R |
| Шведский | B S L T D K |

## 18: Формальный синтаксис

```bnf
<PGN-database> ::= <PGN-game> <PGN-database>
                   <empty>

<PGN-game> ::= <tag-section> <movetext-section>

<tag-section> ::= <tag-pair> <tag-section>
                  <empty>

<tag-pair> ::= [ <tag-name> <tag-value> ]

<tag-name> ::= <identifier>

<tag-value> ::= <string>

<movetext-section> ::= <element-sequence> <game-termination>

<element-sequence> ::= <element> <element-sequence>
                       <recursive-variation> <element-sequence>
                       <empty>

<element> ::= <move-number-indication>
              <SAN-move>
              <numeric-annotation-glyph>

<recursive-variation> ::= ( <element-sequence> )

<game-termination> ::= 1-0
                       0-1
                       1/2-1/2
                       *
<empty> ::=
```

## 19: Каноническое хеширование шахматной позиции

> __Примечание.__ Этот раздел находится в разработке.

## 20: Двоичное представление (PGC)

> __Примечание.__ Этот раздел находится в разработке.

Двоичная версия PGN - это PGC (PGN Game Coding). PGC - это стандарт двоичного представления данных PGN, разработанный с двойной целью: эффективности хранения и ввода-вывода программы. Файл, содержащий данные PGC, должен иметь имя с суффиксом ".pgc".

В отличие от текстовых файлов PGN, которые могут иметь зависящие от локали представления для новых строк, файлы PGC имеют данные, которые не меняются из-за локальной среды обработки. Это означает, что файлы PGC могут передаваться между системами с использованием общих методов передачи двоичных файлов.

Файлы PGC должны использоваться только тогда, когда использование PGN невозможно из-за ограничений ресурсов времени и пространства. Поскольку общий уровень обработки возрастает, потребность в PGC по сравнению с PGN будет уменьшаться. Поэтому рекомендуется не использовать PGC в качестве представления по умолчанию, поскольку его гораздо сложнее понять без соответствующего программного обеспечения.

Данные PGC состоят из последовательности записей PGC. Каждая запись состоит из последовательности одного или нескольких байтов. Первый байт - это маркер записи PGN и он определяет интерпретацию оставшейся части записи. Эта оставшаяся часть состоит из нуля или более элементов записи PGN. Типы элементов включают последовательности ходов, наборы ходов и строковые данные.

### 20.1: Байты, слова и двойные слова

На самом нижнем уровне двоичные данные PGC организованы как байты, слова (два смежных байта) и двойные слова (четыре смежных байта). Все восемь битов байта используются. Целые значения хранятся с использованием двоичного дополнения. Целые могут быть знаковыми или беззнаковыми в зависимости от контекста. Многобайтные целые хранятся в формате low-endian с наименее значимым байтом, появляющимся первым.

Однобайтное целое число называется `int-1`. Двухбайтное целое число называется `int-2`. Четырехбайтное целое число называется `int-4`.

Символы хранятся как байты с использованием набора кодов ISO 8859/1 Latin-1 (ECMA-94). Нет предусмотрено других наборов символов или представлений.

### 20.2: Порядковые номера ходов

Ход шахматной партии представляется с использованием порядкового номера хода. Это беззнаковый байтовый номер, который может быть от нуля до 255. Порядковый номер хода интерпретируется как индекс в списке легальных ходов из текущей позиции. Этот список формируется путем генерации легальных ходов из текущей позиции, присвоения строковых значений SAN каждому ходу и сортировки этих строк по возрастанию. Обратите внимание, что семибитовый порядковый номер, используемый некоторыми менее качественными системами представления, недостаточен, поскольку некоторые позиции имеют более 128 доступных ходов.

Примеры: Из начальной позиции существует двадцать ходов. Порядковый номер хода 0 соответствует строке хода "Na3"; порядковый номер хода 1 соответствует "Nc3", порядковый номер хода 4 соответствует "a3", а порядковый номер хода 19 соответствует "h4".

Ходы могут быть организованы в последовательности или множества. Последовательность ходов - это упорядоченный список ходов, которые играются один за другим от первого до последнего. Множество ходов - это список ходов, которые все могут быть сыграны из текущей позиции.

Данные о последовательности ходов представляются с указанием заголовка длины, за которым следуют порядковые номера ходов. Заголовок длины - это беззнаковое целое число в один байт. Целое число дает количество, возможно нулевое, последующих байтов порядковых номеров. Большинство последовательностей ходов могут быть представлены, используя только байтовый заголовок; эти называются "mvseq-1" элементами. Последовательности ходов, использующие слово заголовка, называются "mvseq-2" элементами.

Данные о множестве ходов представляются с указанием заголовка длины, за которым следуют порядковые номера ходов. Заголовок длины - это беззнаковое целое число в один байт. Целое число дает количество, возможно нулевое, последующих байтов порядковых номеров. Все множества ходов представляются с использованием только байтового заголовка; эти называются "mvset-1" элементами. (Обратите внимание, что множество ходов может содержать не более 255 из 256 возможных порядковых номеров одновременно.)

### 20.3: Строковые данные

Строковые данные в PGC представляются с использованием длины заголовка, за которым следуют байты символов. Длина заголовка - это беззнаковое целое число в один байт. Целое число дает количество, возможно нулевое, последующих байтов символов. Строковые данные могут быть представлены с использованием только байтового заголовка; эти называются "string-1" элементами. Строковые данные, использующие слово заголовка, называются "string-2" элементами. Строковые данные, использующие двойное слово заголовка, называются "string-4" элементами. Не требуется специального символа ASCII NUL для хранения строки PGC, поскольку длина явно указана в заголовке элемента.

### 20.4: Коды маркеров

Коды маркеров PGC представлены в шестнадцатеричном формате. Код маркера PGC ноль (маркер `0x00`) является маркером "noop" и не несет никакого значения. Каждый дополнительный код маркера определен в своем собственном подразделе ниже.

#### 20.4.1: Маркер 0x01: уменьшенный формат экспорта одной игры

Маркер `0x01` используется для указания одной полной игры в уменьшенном формате экспорта. Это относится к игре, в которой есть только данные тегов Seven Tag Roster, сыгранные ходы и отсутствуют аннотации или комментарии. Этот тип записи используется в качестве альтернативы общим парам записей начала/конца игры, описанных ниже. Общие маркеры пары (`0x05/0x06`) используются для представления данных игры, которые нельзя адекватно представить в уменьшенном формате экспорта. После маркера `0x01` следует восемь элементов, образующих запись "уменьшенного формата экспорта одной игры". По порядку это:

1) string-1 (Значение тега Event)
2) string-1 (Значение тега Site)
3) string-1 (Значение тега Date)
4) string-1 (Значение тега Round)
5) string-1 (Значение тега White)
6) string-1 (Значение тега Black)
7) string-1 (Значение тега Result)
8) mvseq-2 (сыгранные ходы)

#### 20.4.2: Маркер 0x02: пара тегов

Маркер `0x02` используется для указания одной пары тегов. После маркера `0x02` следуют два элемента, образующих запись "пары тегов". По порядку это:

1) string-1 (имя тега)
2) string-1 (значение тега)

#### 20.4.3: Маркер 0x03: короткая последовательность ходов

Маркер `0x03` используется для указания короткой последовательности ходов. После маркера `0x03` следует один элемент, образующий запись "короткой последовательности ходов"; это:

1) mvseq-1 (сыгранные ходы)

#### 20.4.4: Маркер 0x04: длинная последовательность ходов

Маркер `0x04` используется для указания длинной последовательности ходов. После маркера `0x04` следует один элемент, образующий запись "длинной последовательности ходов"; это:

1) mvseq-2 (сыгранные ходы)

#### 20.4.5: Маркер 0x05: начало общих данных игры

Маркер `0x05` используется для указания начала данных для игры. Он не имеет ассоциированных элементов; это полная запись сама по себе. Вместо этого он обозначает начало записей PGC, используемых для описания игры. Все записи до соответствующей записи "конец общих данных игры" считаются частью одной и той же игры. (Тип записи PGC `0x01`, "уменьшенный формат экспорта одной игры", не допускается появляться внутри пары записей начала/конца общих данных игры. Общая конструкция игры используется в качестве альтернативы типу записи `0x01` в тех случаях, когда последний слишком ограничивает данные для игры.)

#### 20.4.6: Маркер 0x06: конец общих данных игры

Маркер `0x06` используется для указания конца данных для игры. Он не имеет ассоциированных элементов; это полная запись сама по себе. Вместо этого он обозначает конец записей PGC, используемых для описания игры. Все записи после соответствующей записи "начало общих данных игры" считаются частью одной и той же игры.

#### 20.4.7: Маркер 0x07: простой NAG

Маркер `0x07` используется для указания присутствия простого NAG (Numeric Annotation Glyph). Это маркер аннотации, который имеет только короткую идентификацию типа и не имеет операндов. После маркера `0x07` следует один элемент, образующий запись "простого NAG"; это:

1) int-1 (беззнаковое значение NAG, от 0 до 255)

#### 20.4.8: Маркер 0x08: rav-begin

Маркер `0x08` используется для указания начала RAV (Recursive Annotation Variation). Он не имеет ассоциированных элементов; это полная запись сама по себе. Вместо этого он обозначает начало PGC-записей, используемых для описания рекурсивной аннотации. Он считается открывающей скобкой для более поздних записей rav-end; рекурсивная аннотация полностью описывается между парой скобок. Структуры rav-begin/data/rav-end могут быть вложенными.

#### 20.4.9: Маркер 0x09: rav-end

Маркер `0x09` используется для указания конца RAV (Recursive Annotation Variation). Он не имеет ассоциированных элементов; это полная запись сама по себе. Вместо этого он обозначает конец PGC-записей, используемых для описания рекурсивной аннотации. Он считается закрывающей скобкой для более ранних записей rav-begin; рекурсивная аннотация полностью описывается между парой скобок. Структуры rav-begin/data/rav-end могут быть вложенными.

#### 20.4.10: Маркер 0x0a: escape-string

Маркер `0x0a` используется для указания присутствия экранированной строки. Это строка, представленная с использованием механизма экранирования в PGN при помощи знака процента. Данные, которые экранируются, - это последовательность символов, непосредственно следующих за знаком процента до, но не включая завершающий символ новой строки. Как и в случае с экранированием процентом в PGN, использование экранированной строки ограничено использованием для неархивных данных. После маркера `0x0a` следует один элемент, образующий запись "экраннированная строка"; это:

1) string-2 (экранированные строковые данные)

## 21: Использование электронной почты

> __Примечание.__ Этот раздел находится в разработке.

Standard: EOF
